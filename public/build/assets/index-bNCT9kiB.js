import{r as h,j as e}from"./ui-C9UzXxo-.js";import{P as we}from"./page-template-B2HXPu-s.js";import{u as se,D as Se,e as Ce,f as ke,h as _e,j as De,i as G,k as Pe,B as b,K as Oe,P as Ee,S as u,l as y,n as w,o as S,C as Fe,t as a}from"./app-CePVSpCk.js";import{P as H}from"./pagination-ByvlncqM.js";import{S as Ie}from"./search-and-filter-bar-B2CgZCxN.js";import{D as Te,b as Me,c as Ae,d as C,e as Le}from"./CookieConsentBanner-9JM6Tk5v.js";import{u as ze}from"./use-initials-Cc4cPBcQ.js";import{C as W}from"./CrudFormModal-BxbeyOXE.js";import{C as Re}from"./CrudDeleteModal-CqSiuuPI.js";import{R as $e,a as Ue}from"./radio-group-DixjSev-.js";import{S as Ve}from"./switch-BT9_4soN.js";import{C as E}from"./credit-card-Cw26BS3B.js";import{C as Be}from"./circle-check-Bsqe1Oy2.js";import{A as J,K as Q,L as X}from"./lock-open-DSiBsvyN.js";import{I as Z}from"./info-Cfzy708t.js";import{L as ee}from"./lock-BmEkJcEt.js";import{S as $}from"./square-pen-Df-vO64U.js";import{T as U}from"./trash-2-3E96f3UA.js";import{E as qe}from"./eye-Ds3O8uul.js";import"./vendor-CxtKjBZA.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./language-BWaL1pXC.js";import"./copy-BbEiGrsE.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./users-B2V-gWAi.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";/* empty css            *//* empty css                  */import"./utils-2yqaTY3d.js";import"./filter-CJHBgxPm.js";import"./list-gVaFRlBo.js";import"./globe-DIoyL4mD.js";import"./checkbox-DdUGEdGf.js";import"./scroll-area-B6c1Z5Wm.js";import"./circle-hahOXJb0.js";function Ke({isOpen:t,onClose:k,onConfirm:i,plans:F,currentPlanId:n,companyName:O}){const{t:c}=se(),[N,m]=h.useState(null),[v,f]=h.useState(!1),p=F.filter(l=>{const o=l.duration.toLowerCase();return v?o==="yearly":o==="monthly"});h.useEffect(()=>{if(t&&p&&p.length>0){const l=p.find(o=>o.is_current===!0);if(l)m(l.id);else if(n){const o=p.find(_=>_.id===n);m(o?n:p[0].id)}else m(p[0].id)}},[t,F,v]),h.useEffect(()=>{p.length>0&&N&&(p.find(o=>o.id===N)||m(p[0].id))},[v]);const j=()=>{N&&i(N,v?"yearly":"monthly")};return e.jsx(Se,{open:t,onOpenChange:k,children:e.jsxs(Ce,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ke,{children:[e.jsxs(_e,{children:[c("Upgrade Plan for")," ",O]}),e.jsx(De,{children:c("Select a new plan for this company")})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:`text-sm font-medium ${v?"text-gray-500":"text-primary"}`,children:c("Monthly")}),e.jsx(Ve,{checked:v,onCheckedChange:f,className:"data-[state=checked]:bg-primary"}),e.jsx("span",{className:`text-sm font-medium ${v?"text-primary":"text-gray-500"}`,children:c("Yearly")}),v&&e.jsx(G,{variant:"secondary",className:"ml-2 bg-green-100 text-green-800",children:c("Save up to 20%")})]}),e.jsx($e,{value:(N==null?void 0:N.toString())||"",onValueChange:l=>m(parseInt(l)),className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:p.length>0?p.map(l=>{var o;return e.jsxs("div",{className:`relative rounded-lg border p-4 cursor-pointer transition-all ${N===l.id?"border-primary bg-primary/5 shadow-md":"border-gray-200 hover:border-gray-300"} ${l.is_current?"bg-blue-50":""}`,onClick:()=>m(l.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{value:l.id.toString(),id:`plan-${l.id}`,className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:l.name})]}),l.is_current&&e.jsx(G,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200",children:c("Current")})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(E,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"text-xl font-bold text-primary",children:((o=window.appSettings)==null?void 0:o.formatCurrency(l.price))||`$${l.price}`}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["/ ",l.duration.toLowerCase()]})]}),l.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:l.description}),(l.max_employees||l.max_users||l.storage_limit)&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3 p-2 bg-gray-50 rounded",children:[l.max_employees&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l.max_employees}),e.jsx("div",{className:"text-xs text-gray-500",children:c("Employees")})]}),l.max_users&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l.max_users}),e.jsx("div",{className:"text-xs text-gray-500",children:c("Users")})]}),l.storage_limit&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-gray-900",children:l.storage_limit}),e.jsx("div",{className:"text-xs text-gray-500",children:c("Storage")})]})]}),l.features&&l.features.length>0&&e.jsxs("div",{className:"space-y-1",children:[l.features.slice(0,4).map((_,I)=>e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(Be,{className:"mr-1 h-3 w-3 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:_})]},`${l.id}-${I}`)),l.features.length>4&&e.jsxs("div",{className:"text-xs text-gray-400",children:["+",l.features.length-4," more features"]})]})]},l.id)}):e.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e.jsxs("p",{children:[c("No plans available for")," ",c(v?"yearly":"monthly")," ",c("billing")]})})})})]}),e.jsxs(Pe,{children:[e.jsx(b,{variant:"outline",onClick:k,children:c("Cancel")}),e.jsx(b,{onClick:j,disabled:!N||p.length===0,children:c("Upgrade Plan")})]})]})})}function Ts(){var q,K,Y;const{t}=se(),{auth:k,companies:i,plans:F,filters:n={}}=Oe().props;k!=null&&k.permissions;const O=ze(),[c,N]=h.useState("list"),[m,v]=h.useState(n.search||""),[f,p]=h.useState(n.start_date?new Date(n.start_date):void 0),[j,l]=h.useState(n.end_date?new Date(n.end_date):void 0),[o,_]=h.useState(n.status||"all"),[I,V]=h.useState(!1),[te,D]=h.useState(!1),[re,T]=h.useState(!1),[ae,M]=h.useState(!1),[ie,A]=h.useState(!1),[d,L]=h.useState(null),[le,ne]=h.useState([]),[P,z]=h.useState("create"),oe=()=>o!=="all"||m!==""||f!==void 0||j!==void 0,de=()=>(o!=="all"?1:0)+(m?1:0)+(f?1:0)+(j?1:0),ce=s=>{s.preventDefault(),B()},B=()=>{const s={page:1};m&&(s.search=m),o!=="all"&&(s.status=o),f&&(s.start_date=f.toISOString().split("T")[0]),j&&(s.end_date=j.toISOString().split("T")[0]),n.per_page&&(s.per_page=n.per_page),u.get(route("companies.index"),s,{preserveState:!0,preserveScroll:!0})},me=s=>{_(s);const r={page:1};m&&(r.search=m),s!=="all"&&(r.status=s),f&&(r.start_date=f.toISOString().split("T")[0]),j&&(r.end_date=j.toISOString().split("T")[0]),n.per_page&&(r.per_page=n.per_page),u.get(route("companies.index"),r,{preserveState:!0,preserveScroll:!0})},xe=s=>{const r=n.sort_field===s&&n.sort_direction==="asc"?"desc":"asc",g={sort_field:s,sort_direction:r,page:1};m&&(g.search=m),o!=="all"&&(g.status=o),f&&(g.start_date=f.toISOString().split("T")[0]),j&&(g.end_date=j.toISOString().split("T")[0]),n.per_page&&(g.per_page=n.per_page),u.get(route("companies.index"),g,{preserveState:!0,preserveScroll:!0})},x=(s,r)=>{switch(L(r),s){case"login-as":u.get(route("impersonate.start",r.id));break;case"company-info":z("view"),D(!0);break;case"upgrade-plan":be(r);break;case"reset-password":M(!0);break;case"toggle-status":fe(r);break;case"edit":z("edit"),D(!0);break;case"delete":T(!0);break}},he=()=>{L(null),z("create"),D(!0)},pe=s=>{P==="create"?(a.loading(t("Creating company...")),u.post(route("companies.store"),s,{onSuccess:r=>{D(!1),a.dismiss(),r.props.flash.success?a.success(t(r.props.flash.success)):r.props.flash.error&&a.error(t(r.props.flash.error))},onError:r=>{a.dismiss(),typeof r=="string"?a.error(t(r)):a.error(t("Failed to create company: {{errors}}",{errors:Object.values(r).join(", ")}))}})):P==="edit"&&(a.loading(t("Updating company...")),u.put(route("companies.update",d.id),s,{onSuccess:r=>{D(!1),a.dismiss(),r.props.flash.success?a.success(t(r.props.flash.success)):r.props.flash.error&&a.error(t(r.props.flash.error))},onError:r=>{a.dismiss(),typeof r=="string"?a.error(t(r)):a.error(t("Failed to update company: {{errors}}",{errors:Object.values(r).join(", ")}))}}))},ge=()=>{a.loading(t("Deleting company...")),u.delete(route("companies.destroy",d.id),{onSuccess:s=>{T(!1),a.dismiss(),s.props.flash.success?a.success(t(s.props.flash.success)):s.props.flash.error&&a.error(t(s.props.flash.error))},onError:s=>{a.dismiss(),typeof s=="string"?a.error(t(s)):a.error(t("Failed to delete company: {{errors}}",{errors:Object.values(s).join(", ")}))}})},ue=s=>{a.loading(t("Resetting password...")),u.put(route("companies.reset-password",d.id),s,{onSuccess:r=>{M(!1),a.dismiss(),r.props.flash.success?a.success(t(r.props.flash.success)):r.props.flash.error&&a.error(t(r.props.flash.error))},onError:r=>{a.dismiss(),typeof r=="string"?a.error(t(r)):a.error(t("Failed to reset password: {{errors}}",{errors:Object.values(r).join(", ")}))}})},fe=s=>{const r=s.status==="active"?"inactive":"active";a.loading(`${t(r==="active"?"Activating":"Deactivating")} company...`),u.put(route("companies.toggle-status",s.id),{},{onSuccess:g=>{a.dismiss(),g.props.flash.success?a.success(t(g.props.flash.success)):g.props.flash.error&&a.error(t(g.props.flash.error))},onError:g=>{a.dismiss(),typeof g=="string"?a.error(t(g)):a.error(t("Failed to update company status: {{errors}}",{errors:Object.values(g).join(", ")}))}})},je=()=>{_("all"),v(""),p(void 0),l(void 0),V(!1),u.get(route("companies.index"),{page:1,per_page:n.per_page},{preserveState:!0,preserveScroll:!0})},be=s=>{L(s),a.loading(t("Loading plans...")),fetch(route("companies.plans",s.id)).then(r=>r.json()).then(r=>{ne(r.plans),A(!0),a.dismiss()}).catch(r=>{a.dismiss(),a.error(t("Failed to load plans"))})},ve=(s,r)=>{a.loading(t("Upgrading plan...")),u.put(route("companies.upgrade-plan",d.id),{plan_id:s,duration:r},{onSuccess:()=>{A(!1),a.dismiss(),a.success(t("Plan upgraded successfully")),u.reload()},onError:()=>{a.dismiss(),a.error(t("Failed to upgrade plan"))}})},Ne=[{label:t("Add Company"),icon:e.jsx(Ee,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>he()}],ye=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Companies")}],R=[{key:"name",label:t("Name"),sortable:!0,render:(s,r)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary text-white",children:O(r.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.email})]})]})},{key:"plan_name",label:t("Plan"),render:s=>e.jsx("span",{className:"capitalize",children:s})},{key:"created_at",label:t("Created At"),sortable:!0,render:s=>{var r;return((r=window.appSettings)==null?void 0:r.formatDateTime(s,!1))||new Date(s).toLocaleDateString()}}];return e.jsxs(we,{title:t("Companies Management"),url:"/companies",actions:Ne,breadcrumbs:ye,noPadding:!0,children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:e.jsx(Ie,{searchTerm:m,onSearchChange:v,onSearch:ce,filters:[{name:"status",label:t("Status"),type:"select",value:o,onChange:me,options:[{value:"all",label:t("All Status")},{value:"active",label:t("Active")},{value:"inactive",label:t("Inactive")}]},{name:"start_date",label:t("Start Date"),type:"date",value:f,onChange:s=>p(s)},{name:"end_date",label:t("End Date"),type:"date",value:j,onChange:s=>l(s)}],showFilters:I,setShowFilters:V,hasActiveFilters:oe,activeFilterCount:de,onResetFilters:je,onApplyFilters:B,currentPerPage:((q=n.per_page)==null?void 0:q.toString())||"10",onPerPageChange:s=>{const r={page:1,per_page:parseInt(s)};m&&(r.search=m),o!=="all"&&(r.status=o),f&&(r.start_date=f.toISOString().split("T")[0]),j&&(r.end_date=j.toISOString().split("T")[0]),u.get(route("companies.index"),r,{preserveState:!0,preserveScroll:!0})},showViewToggle:!0,activeView:c,onViewChange:N})}),c==="list"?e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[R.map(s=>e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",onClick:()=>s.sortable&&xe(s.key),children:e.jsxs("div",{className:"flex items-center",children:[s.label,s.sortable&&e.jsx("span",{className:"ml-1",children:n.sort_field===s.key?n.sort_direction==="asc"?"↑":"↓":""})]})},s.key)),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:t("Actions")})]})}),e.jsxs("tbody",{children:[(K=i==null?void 0:i.data)==null?void 0:K.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-900 dark:hover:bg-gray-800",children:[R.map(r=>e.jsx("td",{className:"px-4 py-3",children:r.render?r.render(s[r.key],s):s[r.key]},`${s.id}-${r.key}`)),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("login-as",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsx(S,{children:t("Login as Company")})]}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("company-info",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(Z,{className:"h-4 w-4"})})}),e.jsx(S,{children:t("Company Info")})]}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("upgrade-plan",s),className:"text-amber-500 hover:text-amber-700",children:e.jsx(E,{className:"h-4 w-4"})})}),e.jsx(S,{children:t("Upgrade Plan")})]}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("reset-password",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsx(S,{children:t("Reset Password")})]}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("toggle-status",s),className:"text-amber-500 hover:text-amber-700",children:s.status==="active"?e.jsx(ee,{className:"h-4 w-4"}):e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(S,{children:s.status==="active"?t("Disable Login"):t("Enable Login")})]}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>x("edit",s),className:"text-amber-500 hover:text-amber-700",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsx(S,{children:t("Edit")})]}),e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>x("delete",s),children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsx(S,{children:t("Delete")})]})]})})]},s.id)),(!(i!=null&&i.data)||i.data.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:R.length+1,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:t("No companies found")})})]})]})}),e.jsx(H,{from:(i==null?void 0:i.from)||0,to:(i==null?void 0:i.to)||0,total:(i==null?void 0:i.total)||0,links:i==null?void 0:i.links,entityName:t("companies"),onPageChange:s=>u.get(s)})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[(Y=i==null?void 0:i.data)==null?void 0:Y.map(s=>{var r;return e.jsx(Fe,{className:"bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center text-lg font-bold text-gray-700",children:O(s.name)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.email}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${s.status==="active"?"bg-gray-800":"bg-gray-400"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.status==="active"?t("Active"):t("Inactive")})]})]})]}),e.jsxs(Te,{children:[e.jsx(Me,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"12",cy:"5",r:"1"}),e.jsx("circle",{cx:"12",cy:"19",r:"1"})]})})}),e.jsxs(Ae,{align:"end",className:"w-48 z-50",sideOffset:5,children:[e.jsxs(C,{onClick:()=>x("login-as",s),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:t("Login as Company")})]}),e.jsxs(C,{onClick:()=>x("company-info",s),children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:t("Company Info")})]}),e.jsxs(C,{onClick:()=>x("upgrade-plan",s),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:t("Upgrade Plan")})]}),e.jsxs(C,{onClick:()=>x("reset-password",s),children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:t("Reset Password")})]}),e.jsxs(C,{onClick:()=>x("toggle-status",s),children:[s.status==="active"?e.jsx(ee,{className:"h-4 w-4 mr-2"}):e.jsx(X,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:s.status==="active"?t("Disable Login"):t("Enable Login")})]}),e.jsx(Le,{}),e.jsxs(C,{onClick:()=>x("edit",s),className:"text-amber-600",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:t("Edit")})]}),e.jsxs(C,{onClick:()=>x("delete",s),className:"text-rose-600",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:t("Delete")})]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-md p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(E,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:s.plan_name})]}),s.plan_expiry_date&&e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:[t("Expires"),": ",((r=window.appSettings)==null?void 0:r.formatDateTime(s.plan_expiry_date,!1))||new Date(s.plan_expiry_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-4 border border-gray-200 rounded-md",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900 mb-1",children:s.business_count||0}),e.jsx("div",{className:"text-xs text-gray-600",children:t("Businesses")})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 rounded-md",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900 mb-1",children:s.appointments_count||0}),e.jsx("div",{className:"text-xs text-gray-600",children:t("Appointments")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>x("edit",s),className:"flex-1 h-9 text-sm border-gray-300",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),t("Edit")]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>x("company-info",s),className:"flex-1 h-9 text-sm border-gray-300",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),t("View")]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>x("delete",s),className:"flex-1 h-9 text-sm text-gray-700 border-gray-300",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),t("Delete")]})]})]})},s.id)}),(!(i!=null&&i.data)||i.data.length===0)&&e.jsx("div",{className:"col-span-full p-8 text-center text-gray-500 dark:text-gray-400",children:t("No companies found")})]}),e.jsx("div",{className:"mt-6 bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:e.jsx(H,{from:(i==null?void 0:i.from)||0,to:(i==null?void 0:i.to)||0,total:(i==null?void 0:i.total)||0,links:i==null?void 0:i.links,entityName:t("companies"),onPageChange:s=>u.get(s)})})]}),e.jsx(W,{isOpen:te,onClose:()=>D(!1),onSubmit:s=>{s.login_enabled===!1&&delete s.password,s.status=s.login_enabled?"active":"inactive",delete s.login_enabled,pe(s)},formConfig:{fields:[{name:"name",label:t("Company Name"),type:"text",required:!0},{name:"email",label:t("Email"),type:"email",required:!0},{name:"login_enabled",label:t("Enable Login"),placeholder:"",type:"switch",defaultValue:!0},{name:"password",label:t("Password"),type:"password",required:s=>s==="create",conditional:(s,r)=>(r==null?void 0:r.login_enabled)===!0}],modalSize:"lg"},initialData:{...d,login_enabled:(d==null?void 0:d.status)==="active"},title:t(P==="create"?"Add New Company":P==="edit"?"Edit Company":"View Company"),mode:P}),e.jsx(Re,{isOpen:re,onClose:()=>T(!1),onConfirm:ge,itemName:(d==null?void 0:d.name)||"",entityName:"company"}),e.jsx(W,{isOpen:ae,onClose:()=>M(!1),onSubmit:ue,formConfig:{fields:[{name:"password",label:t("New Password"),type:"password",required:!0}],modalSize:"sm"},initialData:{},title:`Reset Password for ${(d==null?void 0:d.name)||"Company"}`,mode:"edit"}),e.jsx(Ke,{isOpen:ie,onClose:()=>A(!1),onConfirm:ve,plans:le,currentPlanId:d==null?void 0:d.plan_id,companyName:(d==null?void 0:d.name)||""})]})}export{Ts as default};
