import{r as u,j as e}from"./ui-C9UzXxo-.js";import{P as O}from"./page-template-B2HXPu-s.js";import{u as $,K as E,C as d,p as m,q as b,r as C,i as h,t as i,S as T}from"./app-CePVSpCk.js";import{R as W}from"./refresh-cw-Dvtr6Xsn.js";import{B}from"./bell-CaHg65eG.js";import{U as R}from"./users-B2V-gWAi.js";import{f as S}from"./utils-2yqaTY3d.js";import"./vendor-CxtKjBZA.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./language-BWaL1pXC.js";import"./CookieConsentBanner-9JM6Tk5v.js";import"./globe-DIoyL4mD.js";import"./switch-BT9_4soN.js";import"./copy-BbEiGrsE.js";import"./credit-card-Cw26BS3B.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";/* empty css            *//* empty css                  */function he({dashboardData:r}){var w;const{t:s}=$(),{auth:g}=E().props,[a,p]=u.useState(!1),[N,y]=u.useState(null),[v,k]=u.useState(null),[U,H]=u.useState("");u.useEffect(()=>{const t=r==null?void 0:r.todayAttendance;t&&(t.clock_in&&(y(new Date(`1970-01-01T${t.clock_in}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})),p(!t.clock_out)),t.clock_out&&k(new Date(`1970-01-01T${t.clock_out}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})));const o=setInterval(()=>{const c=r==null?void 0:r.employeeShift,l=r==null?void 0:r.todayAttendance;if(c&&(l!=null&&l.clock_in)&&!(l!=null&&l.clock_out)&&a){const j=new Date,I=new Date(`1970-01-01T${c.end_time}`);new Date(`1970-01-01T${j.getHours()}:${j.getMinutes()}:${j.getSeconds()}`)>I&&window.location.reload()}},6e4);return()=>clearInterval(o)},[r,a]);const _=()=>{i.loading(s("Clocking in...")),T.post(route("hr.attendance.clock-in"),{employee_id:g.user.id},{onSuccess:t=>{var n;i.dismiss(),(n=t.props.flash)!=null&&n.success?(p(!0),y(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})),i.success(s(t.props.flash.success))):i.error(s(t.props.flash.error||"Failed to clock in"))},onError:(t,n)=>{var o,c;if(i.dismiss(),(c=(o=n==null?void 0:n.props)==null?void 0:o.flash)!=null&&c.error)i.error(s(n.props.flash.error));else if(typeof t=="string")i.error(t);else if(t&&Object.keys(t).length>0){const l=Object.values(t)[0];i.error(Array.isArray(l)?l[0]:l)}else i.error(s("Failed to clock in. Please try again."))}})},A=()=>{i.loading(s("Clocking out...")),T.post(route("hr.attendance.clock-out"),{employee_id:g.user.id},{onSuccess:t=>{var n;i.dismiss(),(n=t.props.flash)!=null&&n.success?(p(!1),k(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})),i.success(s(t.props.flash.success))):i.error(s(t.props.flash.error||"Failed to clock out"))},onError:(t,n)=>{var o,c;if(i.dismiss(),(c=(o=n==null?void 0:n.props)==null?void 0:o.flash)!=null&&c.error)i.error(s(n.props.flash.error));else if(typeof t=="string")i.error(t);else if(t&&Object.keys(t).length>0){const l=Object.values(t)[0];i.error(Array.isArray(l)?l[0]:l)}else i.error(s("Failed to clock out. Please try again."))}})},L=[{label:s("Refresh"),icon:e.jsx(W,{className:"h-4 w-4"}),variant:"outline",onClick:()=>window.location.reload()}],f=(r==null?void 0:r.stats)||{totalAwards:0,totalWarnings:0,totalComplaints:0},x=(r==null?void 0:r.recentActivities)||{announcements:[],meetings:[]},M=t=>({approved:"bg-green-50 text-green-700 ring-green-600/20",pending:"bg-yellow-50 text-yellow-700 ring-yellow-600/20",rejected:"bg-red-50 text-red-700 ring-red-600/20"})[t]||"bg-gray-50 text-gray-700 ring-gray-600/20";return e.jsx(O,{title:s("Dashboard"),url:"/dashboard",actions:L,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",(w=g.user)==null?void 0:w.name,"!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Stay updated with company announcements and meetings"})]})})}),e.jsxs("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-3",children:[e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Total Awards")}),e.jsx("p",{className:"mt-2 text-2xl font-bold",children:f.totalAwards})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx("svg",{className:"h-5 w-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})})]})})}),e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Total Warnings")}),e.jsx("p",{className:"mt-2 text-2xl font-bold",children:f.totalWarnings})]}),e.jsx("div",{className:"rounded-full bg-yellow-100 p-3 dark:bg-yellow-900",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})})]})})}),e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Total Complaints")}),e.jsx("p",{className:"mt-2 text-2xl font-bold",children:f.totalComplaints})]}),e.jsx("div",{className:"rounded-full bg-red-100 p-3 dark:bg-red-900",children:e.jsx("svg",{className:"h-5 w-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})})]}),e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:s("Attendance")}),(r==null?void 0:r.employeeShift)&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[r.employeeShift.name," ",r.employeeShift.start_time," to ",r.employeeShift.end_time]})}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsxs("button",{className:`flex items-center justify-center px-8 py-4 rounded-lg font-semibold transition-colors shadow-md ${a?"bg-gray-400 cursor-not-allowed text-white":"bg-green-500 hover:bg-green-600 text-white"}`,onClick:_,disabled:a,children:[e.jsxs("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6l4 2"}),e.jsx("circle",{cx:"12",cy:"12",r:"10"})]}),s("Clock In")]}),e.jsxs("button",{className:`flex items-center justify-center px-8 py-4 rounded-lg font-semibold transition-colors shadow-md ${a?"bg-red-500 hover:bg-red-600 text-white":"bg-gray-400 cursor-not-allowed text-white"}`,onClick:A,disabled:!a,children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),s("Clock Out")]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium mb-1",children:s("Clock In Time")}),e.jsx("p",{className:"text-lg font-bold text-green-800",children:N||"--:-- --"}),e.jsx("p",{className:"text-xs text-green-600",children:N?"Today":"Not clocked in"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-sm text-red-600 font-medium mb-1",children:s("Clock Out Time")}),e.jsx("p",{className:"text-lg font-bold text-red-800",children:v||"--:-- --"}),e.jsx("p",{className:"text-xs text-red-600",children:v?"Today":"Not clocked out"})]})]})]})})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(d,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center justify-between text-lg font-semibold",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),s("Recent Announcements")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"secondary",children:x.announcements.length}),e.jsx("button",{onClick:()=>window.location.href=route("hr.announcements.index"),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md font-medium transition-colors",children:s("View All")})]})]})}),e.jsx(m,{children:x.announcements.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:x.announcements.map((t,n)=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium",children:t.title}),t.is_high_priority&&e.jsx(h,{variant:"outline",className:"text-xs ring-1 ring-inset bg-red-50 text-red-700 ring-red-600/20",children:"High Priority"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.category," • ",(()=>{try{return t.created_at?S(new Date(t.created_at),"MMM dd, yyyy"):"N/A"}catch{return"Invalid date"}})()]})]})},n))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s("No recent announcements")})})]}),e.jsxs(d,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center justify-between text-lg font-semibold",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),s("Recent Meetings")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"secondary",children:x.meetings.length}),e.jsx("button",{onClick:()=>window.location.href=route("meetings.meetings.index"),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md font-medium transition-colors",children:s("View All")})]})]})}),e.jsx(m,{children:x.meetings.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:x.meetings.map((t,n)=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsx(h,{variant:"outline",className:`text-xs ring-1 ring-inset ${M(t.status)}`,children:t.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(()=>{try{if(!t.meeting_date)return"No date set";const o=new Date(t.meeting_date);if(isNaN(o.getTime()))return"Invalid date";const c=S(o,"MMM dd, yyyy"),l=t.start_time&&t.end_time?` • ${t.start_time} - ${t.end_time}`:"";return c+l}catch{return"Invalid date"}})()})]})},n))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s("No recent meetings")})})]})]})]})})}export{he as default};
