import{r as L,j as e}from"./ui-C9UzXxo-.js";import{P as M}from"./page-template-B2HXPu-s.js";import{u as H,K as I,v as l,C as c,q as h,r as u,w as O,i as d,p as x,x as $,B as v,S as i,t as a}from"./app-CePVSpCk.js";import{P as q}from"./progress-Dh4CgLNX.js";import{C as F}from"./CrudDeleteModal-CqSiuuPI.js";import{A as w}from"./arrow-left-CLCYWjlI.js";import{C as N}from"./chart-no-axes-column-increasing-DpU2YTLr.js";import{S as R}from"./square-pen-Df-vO64U.js";import{T as V}from"./trash-D_jTiZX2.js";import{D as K}from"./download-Dy8kf_tz.js";import"./vendor-CxtKjBZA.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./language-BWaL1pXC.js";import"./CookieConsentBanner-9JM6Tk5v.js";import"./globe-DIoyL4mD.js";import"./switch-BT9_4soN.js";import"./copy-BbEiGrsE.js";import"./credit-card-Cw26BS3B.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./users-B2V-gWAi.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";/* empty css            *//* empty css                  */import"./utils-2yqaTY3d.js";function ye(){var j,b;const{t}=H(),{auth:m,announcement:s,viewCount:y,totalEmployees:C,viewPercentage:g}=I().props,o=(m==null?void 0:m.permissions)||[],[D,p]=L.useState(!1),S=()=>{i.get(route("hr.announcements.index"))},_=()=>{i.get(route("hr.announcements.dashboard"))},T=()=>{i.get(route("hr.announcements.index"),{},{onSuccess:()=>{setTimeout(()=>{const n=document.querySelector(`[data-announcement-id="${s.id}"][data-action="edit"]`);n&&n.dispatchEvent(new MouseEvent("click",{bubbles:!0}))},500)}})},f=()=>{i.get(route("hr.announcements.statistics",s.id))},k=()=>{window.open(route("hr.announcements.download-attachment",s.id),"_blank")},A=()=>{p(!0)},E=()=>{a.loading(t("Deleting announcement...")),i.delete(route("hr.announcements.destroy",s.id),{onSuccess:n=>{p(!1),a.dismiss(),n.props.flash.success?a.success(t(n.props.flash.success)):n.props.flash.error?a.error(t(n.props.flash.error)):a.success(t("Announcement deleted successfully")),i.get(route("hr.announcements.index"))},onError:n=>{a.dismiss(),typeof n=="string"?a.error(n):a.error(`Failed to delete announcement: ${Object.values(n).join(", ")}`)}})},r=[];r.push({label:t("Back to List"),icon:e.jsx(w,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:S}),r.push({label:t("Dashboard"),icon:e.jsx(w,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:_}),l(o,"view-announcements")&&r.push({label:t("Statistics"),icon:e.jsx(N,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:f}),l(o,"edit-announcements")&&r.push({label:t("Edit"),icon:e.jsx(R,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:T}),l(o,"delete-announcements")&&r.push({label:t("Delete"),icon:e.jsx(V,{className:"h-4 w-4 mr-2"}),variant:"destructive",onClick:A});const B=[{title:t("Dashboard"),href:route("dashboard")},{title:t("HR Management"),href:route("hr.announcements.index")},{title:t("Announcements"),href:route("hr.announcements.index")},{title:s.title}],P={"company news":"bg-blue-50 text-blue-700 ring-blue-600/20","policy updates":"bg-purple-50 text-purple-700 ring-purple-600/20",events:"bg-green-50 text-green-700 ring-green-600/20",HR:"bg-amber-50 text-amber-700 ring-amber-600/20","IT updates":"bg-indigo-50 text-indigo-700 ring-indigo-600/20"}[s.category]||"bg-gray-50 text-gray-700 ring-gray-600/20";return e.jsxs(M,{title:s.title,url:`/hr/announcements/${s.id}`,actions:r,breadcrumbs:B,children:[e.jsx(c,{className:"mb-6",children:e.jsxs(h,{children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[e.jsxs("div",{children:[e.jsx(u,{className:"text-2xl",children:s.title}),e.jsx(O,{className:"mt-2 text-base",children:s.description})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-sm font-medium ring-1 ring-inset ${P}`,children:s.category.charAt(0).toUpperCase()+s.category.slice(1)}),s.is_featured&&e.jsx(d,{variant:"secondary",className:"bg-purple-50 text-purple-700 hover:bg-purple-50",children:t("Featured")}),s.is_high_priority&&e.jsx(d,{variant:"secondary",className:"bg-red-50 text-red-700 hover:bg-red-50",children:t("High Priority")})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 text-sm text-gray-500",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("Start Date"),":"]})," ",s.start_date?((j=window.appSettings)==null?void 0:j.formatDateTime(s.start_date,!1))||new Date(s.start_date).toLocaleString():"-"]}),s.end_date&&e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("End Date"),":"]})," ",s.end_date?((b=window.appSettings)==null?void 0:b.formatDateTime(s.end_date,!1))||new Date(s.end_date).toLocaleString():"-"]}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("Audience"),":"]})," ",s.is_company_wide?t("Company-wide"):t("Targeted")]})]})]})}),e.jsxs(c,{className:"mb-6",children:[e.jsx(x,{className:"pt-6",children:e.jsx("div",{className:"prose max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:s.content}})}),s.attachments&&e.jsx($,{children:e.jsxs(v,{variant:"outline",onClick:k,className:"flex items-center",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),t("Download Attachment")]})})]}),!s.is_company_wide&&(s.departments.length>0||s.branches.length>0)&&e.jsxs(c,{className:"mb-6",children:[e.jsx(h,{children:e.jsx(u,{children:t("Target Audience")})}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.departments.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:t("Departments")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.departments.map(n=>e.jsx(d,{variant:"outline",children:n.name},n.id))})]}),s.branches.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:t("Branches")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.branches.map(n=>e.jsx(d,{variant:"outline",children:n.name},n.id))})]})]})})]}),l(o,"view-announcements")&&e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{children:t("Engagement Statistics")})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:t("Views")}),e.jsxs("span",{children:[y," / ",C," (",g,"%)"]})]}),e.jsx(q,{value:g,className:"h-2"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(v,{variant:"outline",onClick:f,className:"flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),t("View Detailed Statistics")]})})]})})]}),e.jsx(F,{isOpen:D,onClose:()=>p(!1),onConfirm:E,itemName:s.title,entityName:"announcement"})]})}export{ye as default};
