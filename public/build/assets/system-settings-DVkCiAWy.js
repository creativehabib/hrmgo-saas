import{r as p,j as e}from"./ui-C9UzXxo-.js";import{u as k,K as M,ah as Y,L as o,I as B,B as R,s as A,S as I,t as v}from"./app-CePVSpCk.js";import{S as m,a as g,b as u,c as h,d as l}from"./select-79vLaRYu.js";import{S as V}from"./switch-BT9_4soN.js";import{l as T,R as L}from"./language-BWaL1pXC.js";import"./vendor-CxtKjBZA.js";/* empty css            *//* empty css                  */import"./utils-2yqaTY3d.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";function $({settings:S={},timezones:y={},dateFormats:b={},timeFormats:F={},isCompanyUser:j=!1}){const{t:s}=k(),D=M().props,d={defaultLanguage:"en",dateFormat:"MM/DD/YYYY",timeFormat:"12h",calendarStartDay:"sunday",defaultTimezone:"UTC",emailVerification:!1,landingPageEnabled:!0},i=Object.keys(S).length>0?S:D.settings||{},[f,w]=p.useState(""),[n,E]=p.useState(()=>({defaultLanguage:i.defaultLanguage||d.defaultLanguage,dateFormat:i.dateFormat||d.dateFormat,timeFormat:i.timeFormat||d.timeFormat,calendarStartDay:i.calendarStartDay||d.calendarStartDay,defaultTimezone:i.defaultTimezone||d.defaultTimezone,emailVerification:i.emailVerification==="true"||i.emailVerification===!0||d.emailVerification,landingPageEnabled:i.landingPageEnabled==="true"||i.landingPageEnabled===!0||i.landingPageEnabled==="1"||(i.landingPageEnabled===void 0?d.landingPageEnabled:!1)}));p.useEffect(()=>{if(Object.keys(i).length>0){const a=Object.keys(d).reduce((t,r)=>(t[r]=i[r]||d[r],t),{});E(t=>({...t,...a,emailVerification:a.emailVerification==="true"||a.emailVerification===!0||a.emailVerification==="1",landingPageEnabled:a.landingPageEnabled==="true"||a.landingPageEnabled===!0||a.landingPageEnabled==="1"||(a.landingPageEnabled===void 0?d.landingPageEnabled:!1)}))}},[i]);const c=(a,t)=>{E(r=>({...r,[a]:t}))},z=a=>{a.preventDefault();const t={defaultLanguage:n.defaultLanguage,dateFormat:n.dateFormat,timeFormat:n.timeFormat,calendarStartDay:n.calendarStartDay,defaultTimezone:n.defaultTimezone,emailVerification:!!n.emailVerification,landingPageEnabled:!!n.landingPageEnabled};j||(t.emailVerification=!!n.emailVerification,t.landingPageEnabled=!!n.landingPageEnabled),I.post(route("settings.system.update"),t,{preserveScroll:!0,onSuccess:r=>{var N,P;const x=(N=r.props.flash)==null?void 0:N.success,C=(P=r.props.flash)==null?void 0:P.error;x?v.success(x):C&&v.error(C)},onError:r=>{const x=r.error||Object.values(r).join(", ")||s("Failed to update system settings");v.error(x)}})},O=Object.entries(y).filter(([a,t])=>a.toLowerCase().includes(f.toLowerCase())||t.toLowerCase().includes(f.toLowerCase()));return e.jsx(Y,{title:s("System Settings"),description:s("Configure system-wide settings for your application"),action:e.jsxs(R,{type:"submit",form:"system-settings-form",size:"sm",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),s("Save Changes")]}),children:e.jsx("form",{id:"system-settings-form",onSubmit:z,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"defaultLanguage",children:s("Default Language")}),e.jsxs(m,{value:n.defaultLanguage,onValueChange:a=>c("defaultLanguage",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:s("Select language"),children:n.defaultLanguage&&(()=>{const a=T.find(t=>t.code===n.defaultLanguage);return a?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{countryCode:a.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}})," ",e.jsx("span",{children:a.name})," "]}):s("Select language")})()})}),e.jsx(h,{children:T.map(a=>e.jsx(l,{value:a.code,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{countryCode:a.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}})," ",e.jsx("span",{children:a.name})]})},a.code))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"dateFormat",children:s("Date Format")}),e.jsxs(m,{value:n.dateFormat,onValueChange:a=>c("dateFormat",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:s("Select date format")})}),e.jsx(h,{children:Object.keys(b).length>0?Object.entries(b).map(([a,t])=>e.jsx(l,{value:a,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:a}),e.jsxs("span",{className:"text-muted-foreground text-sm ml-4",children:["(",t,")"]})]})},a)):e.jsxs(e.Fragment,{children:[e.jsx(l,{value:"M j, Y",children:"Jan 1, 2025"}),e.jsx(l,{value:"d-m-Y",children:"01-01-2025"}),e.jsx(l,{value:"Y-m-d",children:"2025-01-01"}),e.jsx(l,{value:"F j, Y",children:"January 1, 2025"})]})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"timeFormat",children:s("Time Format")}),e.jsxs(m,{value:n.timeFormat,onValueChange:a=>c("timeFormat",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:s("Select time format")})}),e.jsx(h,{children:Object.keys(F).length>0?Object.entries(F).map(([a,t])=>e.jsx(l,{value:a,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:a}),e.jsxs("span",{className:"text-muted-foreground text-sm ml-4",children:["(",t,")"]})]})},a)):e.jsxs(e.Fragment,{children:[e.jsx(l,{value:"g:i A",children:"1:30 PM"}),e.jsx(l,{value:"H:i",children:"13:30"}),e.jsx(l,{value:"g:i a",children:"1:30 pm"})]})})]})]}),!j&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"calendarStartDay",children:s("Calendar Start Day")}),e.jsxs(m,{value:n.calendarStartDay,onValueChange:a=>c("calendarStartDay",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:s("Select start day")})}),e.jsxs(h,{children:[e.jsx(l,{value:"sunday",children:s("Sunday")}),e.jsx(l,{value:"monday",children:s("Monday")})]})]})]})}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(o,{htmlFor:"defaultTimezone",children:s("Default Timezone")}),e.jsxs(m,{value:n.defaultTimezone,onValueChange:a=>c("defaultTimezone",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:s("Select timezone")})}),e.jsxs(h,{children:[e.jsx("div",{className:"p-2",children:e.jsx(B,{placeholder:s("Search timezones..."),value:f,onChange:a=>w(a.target.value),className:"mb-2"})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:Object.keys(y).length>0?O.map(([a,t])=>e.jsx(l,{value:a,children:t},a)):e.jsxs(e.Fragment,{children:[e.jsx(l,{value:"UTC",children:"UTC"}),e.jsx(l,{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx(l,{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx(l,{value:"Europe/London",children:"London (GMT)"})]})})]})]})]}),!j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-2 md:col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{htmlFor:"emailVerification",children:s("Email Verification")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("Require users to verify their email addresses")})]}),e.jsx(V,{id:"emailVerification",checked:n.emailVerification,onCheckedChange:a=>c("emailVerification",a)})]})}),e.jsx("div",{className:"grid gap-2 md:col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{htmlFor:"landingPageEnabled",children:s("Landing Page")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("Enable or disable the public landing page")})]}),e.jsx(V,{id:"landingPageEnabled",checked:n.landingPageEnabled,onCheckedChange:a=>c("landingPageEnabled",a)})]})})]})]})})})}export{$ as default};
