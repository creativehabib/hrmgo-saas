import{r as p,j as s}from"./ui-C9UzXxo-.js";import{P as ve}from"./page-template-B2HXPu-s.js";import{u as fe,K as be,v as f,t as o,P as je,g as z,S as m,C as we,B as N}from"./app-CePVSpCk.js";import{D as ye,b as Ne,c as Se,d as y,e as ke}from"./CookieConsentBanner-9JM6Tk5v.js";import{C as Ce,K as De}from"./CrudTable-Dqp1N8Wk.js";import{C as Pe}from"./CrudDeleteModal-CqSiuuPI.js";import{u as _e}from"./use-initials-Cc4cPBcQ.js";import{P as R}from"./pagination-ByvlncqM.js";import{S as Ee}from"./search-and-filter-bar-B2CgZCxN.js";import{C as Ae}from"./CrudFormModal-BxbeyOXE.js";import{E as Fe}from"./ellipsis-B7Dcpmjs.js";import{E as K}from"./eye-Ds3O8uul.js";import{L as Oe}from"./lock-BmEkJcEt.js";import{L as Te}from"./lock-open-DSiBsvyN.js";import{S as J}from"./square-pen-Df-vO64U.js";import{T as H}from"./trash-2-3E96f3UA.js";import"./vendor-CxtKjBZA.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./language-BWaL1pXC.js";import"./copy-BbEiGrsE.js";import"./credit-card-Cw26BS3B.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./users-B2V-gWAi.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";/* empty css            *//* empty css                  */import"./utils-2yqaTY3d.js";import"./globe-DIoyL4mD.js";import"./switch-BT9_4soN.js";import"./table-C8TGnN1g.js";import"./ticket-DmZKwvAa.js";import"./unlink-BcdgK3yb.js";import"./wrench-CGU7Ft1Y.js";import"./arrow-left-CLCYWjlI.js";import"./arrow-right-C7JdH4Ti.js";import"./circle-help-C0S-oTMA.js";import"./award-T4ZI43xQ.js";import"./wallet-DeVx02LK.js";import"./bell-CaHg65eG.js";import"./cookie-DINhGU1S.js";import"./building-2-Bxzvq01n.js";import"./building-CTTlMSBK.js";import"./trending-down-BBDyDMXb.js";import"./camera-B6YrOv6y.js";import"./chart-column-BuvtPv5K.js";import"./chart-no-axes-column-increasing-DpU2YTLr.js";import"./wifi-BWLuvSZA.js";import"./circle-alert-CPcUaQHG.js";import"./circle-check-big-QRVzFaq_.js";import"./circle-check-Bsqe1Oy2.js";import"./circle-hahOXJb0.js";import"./clipboard-list-CYu519l_.js";import"./code-DLKgizn0.js";import"./tag-DLA_9-Gh.js";import"./download-Dy8kf_tz.js";import"./eye-off-D_POAzrb.js";import"./instagram-DJ274emi.js";import"./filter-CJHBgxPm.js";import"./grip-vertical-GkNxvp67.js";import"./hard-drive-CvIusyLX.js";import"./heart-BxdfWe5j.js";import"./info-Cfzy708t.js";import"./layers-i14JjJ6T.js";import"./target-ChKhh3Jh.js";import"./link-2-Dyh9Asfo.js";import"./twitter-DvSPin83.js";import"./list-gVaFRlBo.js";import"./mail-wmSCdBQm.js";import"./map-pin-CqHzBf39.js";import"./menu-C113HrJq.js";import"./monitor-CP12Y-ih.js";import"./phone-DUkL7MZF.js";import"./play-GEQInAgQ.js";import"./printer-CupyjDD-.js";import"./qr-code-C0PGAHLZ.js";import"./quote-DD8yfV5f.js";import"./refresh-cw-Dvtr6Xsn.js";import"./send-BHiBrVVZ.js";import"./server-B0O429oP.js";import"./shield-CGsXD3Oj.js";import"./star-Cn_AU9AC.js";import"./trash-D_jTiZX2.js";import"./trending-up-Ne7cjba9.js";import"./triangle-alert-CTrT4JQG.js";import"./type-uKUPsFU3.js";import"./user-plus-D-lxH5Xo.js";import"./zap-DH-5T0aI.js";import"./radio-group-DixjSev-.js";import"./checkbox-DdUGEdGf.js";import"./scroll-area-B6c1Z5Wm.js";function Ss(){var L,q;const{t}=fe(),{auth:S,employees:r,branches:Y,planLimits:b,departments:G,designations:Q,filters:d={}}=be().props,c=(S==null?void 0:S.permissions)||[],D=_e(),[P,U]=p.useState("list"),[j,_]=p.useState(d.search||""),[u,E]=p.useState(d.department||"all"),[g,A]=p.useState(d.branch||"all"),[h,F]=p.useState(d.designation||"all"),[x,O]=p.useState(d.status||"all"),[W,T]=p.useState(!1),[X,k]=p.useState(!1),[Z,C]=p.useState(!1),[w,ee]=p.useState(null),te=()=>u!=="all"||g!=="all"||h!=="all"||x!=="all"||j!=="",se=()=>(u!=="all"?1:0)+(g!=="all"?1:0)+(h!=="all"?1:0)+(x!=="all"?1:0)+(j?1:0),ae=e=>{e.preventDefault(),M()},M=()=>{m.get(route("hr.employees.index"),{page:1,search:j||void 0,department:u!=="all"?u:void 0,branch:g!=="all"?g:void 0,designation:h!=="all"?h:void 0,status:x!=="all"?x:void 0,per_page:d.per_page},{preserveState:!0,preserveScroll:!0})},re=e=>{const a=d.sort_field===e&&d.sort_direction==="asc"?"desc":"asc";m.get(route("hr.employees.index"),{sort_field:e,sort_direction:a,page:1,search:j||void 0,department:u!=="all"?u:void 0,branch:g!=="all"?g:void 0,designation:h!=="all"?h:void 0,status:x!=="all"?x:void 0,per_page:d.per_page},{preserveState:!0,preserveScroll:!0})},v=(e,a)=>{var i,l;switch(ee(a),e){case"view":m.get(route("hr.employees.show",((i=a.employee)==null?void 0:i.id)||a.id));break;case"edit":m.get(route("hr.employees.edit",((l=a.employee)==null?void 0:l.id)||a.id));break;case"delete":k(!0);break;case"toggle-status":le(a);break;case"change-password":C(!0);break}},ie=()=>{m.get(route("hr.employees.create"))},oe=()=>{o.loading(t("Deleting employee...")),m.delete(route("hr.employees.destroy",w.id),{onSuccess:e=>{k(!1),o.dismiss(),e.props.flash.success?o.success(t(e.props.flash.success)):e.props.flash.error&&o.error(t(e.props.flash.error))},onError:e=>{o.dismiss(),typeof e=="string"?o.error(t(e)):o.error(t("Failed to delete employee: {{errors}}",{errors:Object.values(e).join(", ")}))}})},le=e=>{var l;const i=(e.status||"inactive")==="active"?"inactive":"active";o.loading(`${t(i==="active"?"Activating":"Deactivating")} employee...`),m.put(route("hr.employees.toggle-status",((l=e.employee)==null?void 0:l.id)||e.id),{},{onSuccess:n=>{o.dismiss(),n.props.flash.success?o.success(t(n.props.flash.success)):n.props.flash.error&&o.error(t(n.props.flash.error))},onError:n=>{o.dismiss(),typeof n=="string"?o.error(t(n)):o.error(t("Failed to update employee status: {{errors}}",{errors:Object.values(n).join(", ")}))}})},ne=e=>{var a;o.loading(t("Changing password...")),m.put(route("hr.employees.change-password",((a=w.employee)==null?void 0:a.id)||w.id),e,{onSuccess:i=>{C(!1),o.dismiss(),i.props.flash.success?o.success(t(i.props.flash.success)):i.props.flash.error&&o.error(t(i.props.flash.error))},onError:i=>{o.dismiss(),typeof i=="string"?o.error(t(i)):o.error(t("Failed to change password: {{errors}}",{errors:Object.values(i).join(", ")}))}})},de=()=>{_(""),E("all"),A("all"),F("all"),O("all"),T(!1),m.get(route("hr.employees.index"),{page:1,per_page:d.per_page},{preserveState:!0,preserveScroll:!0})},I=[];if(f(c,"create-employees")){const e=!b||b.can_create;I.push({label:b&&!e?t("Employee Create Limit Reached ({{current}}/{{max}})",{current:b.current_users,max:b.max_users}):t("Add Employee"),icon:s.jsx(je,{className:"h-4 w-4 mr-2"}),variant:e?"default":"outline",onClick:e?()=>ie():()=>o.error(t("Employee limit exceeded. Your plan allows maximum {{max}} users. Please upgrade your plan.",{max:b.max_users})),disabled:!e})}const me=[{title:t("Dashboard"),href:route("dashboard")},{title:t("HR Management"),href:route("hr.employees.index")},{title:t("Employees")}],ce=[{key:"name",label:t("Name"),sortable:!0,render:(e,a)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary text-white overflow-hidden",children:a.avatar?s.jsx("img",{src:z(a.avatar),alt:a.name,className:"h-full w-full object-cover"}):D(a.name)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:a.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:a.email})]})]})},{key:"employee_id",label:t("Employee ID"),sortable:!0,render:(e,a)=>{var i;return((i=a.employee)==null?void 0:i.employee_id)||"-"}},{key:"department",label:t("Department"),render:(e,a)=>{var i,l;return((l=(i=a.employee)==null?void 0:i.department)==null?void 0:l.name)||"-"}},{key:"designation",label:t("Designation"),render:(e,a)=>{var i,l;return((l=(i=a.employee)==null?void 0:i.designation)==null?void 0:l.name)||"-"}},{key:"status",label:t("Status"),render:(e,a)=>{const i=a.status||"inactive";return s.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ${i==="active"?"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":"bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/20"}`,children:t(i==="active"?"Active":"Inactive")})}},{key:"date_of_joining",label:t("Joined"),sortable:!0,render:(e,a)=>{var l,n;const i=(l=a.employee)==null?void 0:l.date_of_joining;return i?((n=window.appSettings)==null?void 0:n.formatDateTime(i,!1))||new Date(i).toLocaleDateString():"-"}}],pe=[{label:t("View"),icon:"Eye",action:"view",className:"text-blue-500",requiredPermission:"view-employees"},{label:t("Edit"),icon:"Edit",action:"edit",className:"text-amber-500",requiredPermission:"edit-employees"},{label:t("Change Password"),icon:"Key",action:"change-password",className:"text-green-500",requiredPermission:"edit-employees"},{label:t("Toggle Status"),icon:"Lock",action:"toggle-status",className:"text-amber-500",requiredPermission:"edit-employees"},{label:t("Delete"),icon:"Trash2",action:"delete",className:"text-red-500",requiredPermission:"delete-employees"}],ue=[{value:"all",label:t("All Branches")},...(Y||[]).map(e=>({value:e.id.toString(),label:e.name}))],ge=[{value:"all",label:t("All Departments")},...(G||[]).map(e=>{var a;return{value:e.id.toString(),label:`${e.name} (${((a=e.branch)==null?void 0:a.name)||t("No Branch")})`}})],he=[{value:"all",label:t("All Designations")},...(Q||[]).map(e=>{var a;return{value:e.id.toString(),label:`${e.name} (${((a=e.department)==null?void 0:a.name)||t("No Department")})`}})],xe=[{value:"all",label:t("All Statuses")},{value:"active",label:t("Active")},{value:"inactive",label:t("Inactive")},{value:"probation",label:t("Probation")},{value:"terminated",label:t("Terminated")}];return s.jsxs(ve,{title:t("Employee Management"),url:"/hr/employees",actions:I,breadcrumbs:me,noPadding:!0,children:[s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:s.jsx(Ee,{searchTerm:j,onSearchChange:_,onSearch:ae,filters:[{name:"branch",label:t("Branch"),type:"select",value:g,onChange:A,options:ue},{name:"department",label:t("Department"),type:"select",value:u,onChange:E,options:ge},{name:"designation",label:t("Designation"),type:"select",value:h,onChange:F,options:he},{name:"status",label:t("Status"),type:"select",value:x,onChange:O,options:xe}],showFilters:W,setShowFilters:T,hasActiveFilters:te,activeFilterCount:se,onResetFilters:de,onApplyFilters:M,currentPerPage:((L=d.per_page)==null?void 0:L.toString())||"10",onPerPageChange:e=>{m.get(route("hr.employees.index"),{page:1,per_page:parseInt(e),search:j||void 0,department:u!=="all"?u:void 0,branch:g!=="all"?g:void 0,designation:h!=="all"?h:void 0,status:x!=="all"?x:void 0},{preserveState:!0,preserveScroll:!0})},showViewToggle:!0,activeView:P,onViewChange:U})}),P==="list"?s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[s.jsx(Ce,{columns:ce,actions:pe,data:(r==null?void 0:r.data)||[],from:(r==null?void 0:r.from)||1,onAction:v,sortField:d.sort_field,sortDirection:d.sort_direction,onSort:re,permissions:c,entityPermissions:{view:"view-employees",create:"create-employees",edit:"edit-employees",delete:"delete-employees"}}),s.jsx(R,{from:(r==null?void 0:r.from)||0,to:(r==null?void 0:r.to)||0,total:(r==null?void 0:r.total)||0,links:r==null?void 0:r.links,entityName:t("employees"),onPageChange:e=>m.get(e)})]}):s.jsxs("div",{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(q=r==null?void 0:r.data)==null?void 0:q.map(e=>{var a,i,l,n,B,V,$;return s.jsx(we,{className:"bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-primary text-white flex items-center justify-center text-lg font-bold overflow-hidden",children:e.avatar?s.jsx("img",{src:z(e.avatar),alt:e.name,className:"h-full w-full object-cover"}):D(e.name)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:e.email}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:((a=e.employee)==null?void 0:a.employee_id)||"-"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${e.status==="active"?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.status==="active"?t("Active"):t("Inactive")})]})]})]}),s.jsxs(ye,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(N,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300",children:s.jsx(Fe,{className:"h-4 w-4"})})}),s.jsxs(Se,{align:"end",className:"w-48 z-50",sideOffset:5,children:[f(c,"view-employees")&&s.jsxs(y,{onClick:()=>v("view",e),children:[s.jsx(K,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:t("View Employee")})]}),f(c,"edit-employees")&&s.jsxs(y,{onClick:()=>v("change-password",e),children:[s.jsx(De,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:t("Change Password")})]}),f(c,"edit-employees")&&s.jsxs(y,{onClick:()=>v("toggle-status",e),children:[e.status==="active"?s.jsx(Oe,{className:"h-4 w-4 mr-2"}):s.jsx(Te,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:e.status==="active"?t("Deactivate"):t("Activate")})]}),s.jsx(ke,{}),f(c,"edit-employees")&&s.jsxs(y,{onClick:()=>v("edit",e),className:"text-amber-600",children:[s.jsx(J,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:t("Edit")})]}),f(c,"delete-employees")&&s.jsxs(y,{onClick:()=>v("delete",e),className:"text-rose-600",children:[s.jsx(H,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:t("Delete")})]})]})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md p-3 mb-4",children:[s.jsxs("div",{className:"text-sm mb-1",children:[s.jsxs("span",{className:"font-medium",children:[t("Department"),":"]})," ",((l=(i=e.employee)==null?void 0:i.department)==null?void 0:l.name)||"-"]}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium",children:[t("Designation"),":"]})," ",((B=(n=e.employee)==null?void 0:n.designation)==null?void 0:B.name)||"-"]})]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:[t("Joined:")," ",(V=e.employee)!=null&&V.date_of_joining?(($=window.appSettings)==null?void 0:$.formatDateTime(e.employee.date_of_joining,!1))||new Date(e.employee.date_of_joining).toLocaleDateString():"-"]}),s.jsxs("div",{className:"flex gap-2",children:[f(c,"edit-employees")&&s.jsxs(N,{variant:"outline",size:"sm",onClick:()=>v("edit",e),className:"flex-1 h-9 text-sm border-gray-300 dark:border-gray-600 dark:text-gray-200",children:[s.jsx(J,{className:"h-4 w-4 mr-2"}),t("Edit")]}),f(c,"view-employees")&&s.jsxs(N,{variant:"outline",size:"sm",onClick:()=>v("view",e),className:"flex-1 h-9 text-sm border-gray-300 dark:border-gray-600 dark:text-gray-200",children:[s.jsx(K,{className:"h-4 w-4 mr-2"}),t("View")]}),f(c,"delete-employees")&&s.jsxs(N,{variant:"outline",size:"sm",onClick:()=>v("delete",e),className:"flex-1 h-9 text-sm text-gray-700 border-gray-300 dark:border-gray-600 dark:text-gray-200",children:[s.jsx(H,{className:"h-4 w-4 mr-2"}),t("Delete")]})]})]})},e.id)})}),s.jsx("div",{className:"mt-6 bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:s.jsx(R,{from:(r==null?void 0:r.from)||0,to:(r==null?void 0:r.to)||0,total:(r==null?void 0:r.total)||0,links:r==null?void 0:r.links,entityName:t("employees"),onPageChange:e=>m.get(e)})})]}),s.jsx(Pe,{isOpen:X,onClose:()=>k(!1),onConfirm:oe,itemName:(w==null?void 0:w.name)||"",entityName:"employee"}),s.jsx(Ae,{isOpen:Z,onClose:()=>C(!1),onSubmit:ne,formConfig:{fields:[{name:"password",label:t("New Password"),type:"password",required:!0},{name:"password_confirmation",label:t("Confirm Password"),type:"password",required:!0}],modalSize:"md"},initialData:{},title:t("Change Employee Password"),mode:"edit"})]})}export{Ss as default};
