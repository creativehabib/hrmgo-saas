import{r as d,j as e}from"./ui-C9UzXxo-.js";import{P as ke,C as Me}from"./page-template-B2HXPu-s.js";import{u as Se,K as Fe,ai as i,P as k,C as T,p as X,v as u,B as c,I as B,a9 as Ee,z as M,X as Le,i as re,D as ae,e as te,f as ie,h as le,ac as oe}from"./app-CePVSpCk.js";import{D as _e,b as ze,c as Ae,d as S,e as Ie}from"./CookieConsentBanner-9JM6Tk5v.js";import{H as ne}from"./hard-drive-CvIusyLX.js";import{E as Ue}from"./ellipsis-B7Dcpmjs.js";import{I as de}from"./info-Cfzy708t.js";import{C as W}from"./copy-BbEiGrsE.js";import{D as ce}from"./download-Dy8kf_tz.js";import"./vendor-CxtKjBZA.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./language-BWaL1pXC.js";import"./credit-card-Cw26BS3B.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./users-B2V-gWAi.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";/* empty css            *//* empty css                  */import"./utils-2yqaTY3d.js";import"./globe-DIoyL4mD.js";import"./switch-BT9_4soN.js";function ms(){var se;const{t:r}=Se(),{csrf_token:b,auth:F}=Fe().props,m=(F==null?void 0:F.permissions)||[],[q,E]=d.useState([]),[me,xe]=d.useState([]),[f,H]=d.useState(null),[p,K]=d.useState([]),[ue,$]=d.useState(!1),[h,he]=d.useState(""),[g,y]=d.useState(1),[fe,v]=d.useState(!1),[V,L]=d.useState(!1),[N,_]=d.useState(!1),[pe,z]=d.useState(!1),[A,I]=d.useState(""),[ge,G]=d.useState(!1),[o,je]=d.useState(null),C=12,J=async()=>{if(A.trim())try{const s=await fetch(route("api.media.directories.create"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":b},body:JSON.stringify({name:A})}),t=await s.json();s.ok?(i.success(t.message||r("Directory created successfully")),I(""),z(!1),U()):t.errors&&Array.isArray(t.errors)?t.errors.forEach(a=>i.error(a)):i.error(t.error||t.message||r("Failed to create directory"))}catch{i.error(r("Network error: Failed to create directory"))}},U=d.useCallback(async()=>{$(!0);try{const s=new URLSearchParams;f&&s.append("directory_id",f.toString());const t=await fetch(`${route("api.media.index")}?${s}`,{credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json(),n=Array.isArray(a.media)?a.media:Array.isArray(a)?a:[];E(n),xe(a.directories||[]),K(n)}catch(s){console.error("Failed to load media:",s),i.error("Failed to load media")}finally{$(!1)}},[f]);d.useEffect(()=>{U()},[U]),d.useEffect(()=>{const s=q.filter(t=>t.name.toLowerCase().includes(h.toLowerCase())||t.file_name.toLowerCase().includes(h.toLowerCase()));K(s),y(1)},[h,q]);const Q=async s=>{L(!0);const t=Array.from(s);if(t.length===0){L(!1);return}const a=new FormData;t.forEach(n=>{a.append("files[]",n)}),f&&a.append("directory_id",f.toString());try{const n=await fetch(route("api.media.batch"),{method:"POST",body:a,credentials:"same-origin",headers:{"X-CSRF-TOKEN":b,"X-Requested-With":"XMLHttpRequest"}}),l=await n.json();n.ok?(E(x=>[...l.data,...x]),i.success(l.message),l.errors&&l.errors.length>0&&l.errors.forEach(x=>{i.error(x)})):(l.errors&&Array.isArray(l.errors)?l.errors.forEach(x=>{i.error(x)}):l.message?i.error(l.message):i.error(r("Failed to upload files")),l.allowed_types&&i.error(r("Allowed types: {{types}}",{types:l.allowed_types})),l.max_size_mb&&i.error(r("Max file size: {{size}} MB",{size:l.max_size_mb})))}catch{i.error("Error uploading files")}L(!1),v(!1)},R=s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?_(!0):s.type==="dragleave"&&_(!1)},Ne=s=>{s.preventDefault(),s.stopPropagation(),_(!1),s.dataTransfer.files&&s.dataTransfer.files[0]&&Q(s.dataTransfer.files)},we=async s=>{try{const t=await fetch(route("api.media.destroy",s),{method:"DELETE",credentials:"same-origin",headers:{"X-CSRF-TOKEN":b,"X-Requested-With":"XMLHttpRequest"}}),a=await t.json();t.ok?(E(n=>n.filter(l=>l.id!==s)),i.success(a.message||r("Media deleted successfully"))):a.errors&&Array.isArray(a.errors)?a.errors.forEach(n=>i.error(n)):i.error(a.error||a.message||r("Failed to delete media"))}catch{i.error(r("Error deleting media"))}},P=s=>{navigator.clipboard.writeText(s),i.success("Image URL copied to clipboard")},Y=async(s,t)=>{try{const a=await fetch(route("api.media.download",s),{credentials:"same-origin",headers:{"X-CSRF-TOKEN":b,"X-Requested-With":"XMLHttpRequest"}});if(!a.ok){const w=await a.json();w.errors&&Array.isArray(w.errors)?w.errors.forEach(De=>i.error(De)):i.error(w.error||w.message||r("Download failed"));return}const n=await a.blob(),l=window.URL.createObjectURL(n),x=document.createElement("a");x.href=l,x.download=t,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(l),i.success(r("Download started"))}catch{i.error(r("Download failed: Network error"))}},be=s=>{je(s),G(!0)},O=s=>{if(s===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,n)).toFixed(2))+" "+a[n]},ye=s=>new Date(s).toLocaleString(),Z=s=>s.startsWith("image/")?e.jsx(M,{className:"h-4 w-4"}):s.includes("pdf")?e.jsx("div",{className:"h-4 w-4 bg-red-500 rounded text-white text-xs flex items-center justify-center font-bold",children:"PDF"}):s.includes("word")||s.includes("document")?e.jsx("div",{className:"h-4 w-4 bg-blue-500 rounded text-white text-xs flex items-center justify-center font-bold",children:"DOC"}):s.includes("csv")||s.includes("spreadsheet")?e.jsx("div",{className:"h-4 w-4 bg-green-500 rounded text-white text-xs flex items-center justify-center font-bold",children:"CSV"}):s.startsWith("video/")?e.jsx("div",{className:"h-4 w-4 bg-purple-500 rounded text-white text-xs flex items-center justify-center font-bold",children:"VID"}):s.startsWith("audio/")?e.jsx("div",{className:"h-4 w-4 bg-orange-500 rounded text-white text-xs flex items-center justify-center font-bold",children:"AUD"}):e.jsx("div",{className:"h-4 w-4 bg-gray-500 rounded text-white text-xs flex items-center justify-center font-bold",children:"FILE"}),j=Math.ceil(p.length/C),D=(g-1)*C,ee=p.slice(D,D+C),ve=[{title:r("Dashboard"),href:route("dashboard")},{title:r("Media Library")}],Ce=[{label:r("Upload Media"),icon:e.jsx(k,{className:"h-4 w-4"}),variant:"default",onClick:()=>v(!0)}];return e.jsx(ke,{title:r("Media Library"),url:"/examples/media-library-demo",breadcrumbs:ve,actions:Ce,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(T,{children:e.jsxs(X,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-4",children:[e.jsx(c,{variant:f===null?"default":"outline",size:"sm",onClick:()=>H(null),children:"All Files"}),me.map(s=>u(m,"manage-media-directories")&&e.jsx(c,{variant:f===s.id?"default":"outline",size:"sm",onClick:()=>H(s.id),children:s.name},s.id)),u(m,"create-media-directories")&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>z(!0),children:e.jsx(k,{className:"h-4 w-4"})})]}),pe&&e.jsx("div",{className:"mb-4 p-3 border rounded-lg bg-muted/30",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{placeholder:"Directory name...",value:A,onChange:s=>I(s.target.value),onKeyPress:s=>s.key==="Enter"&&J()}),u(m,"create-media-directories")&&e.jsx(c,{onClick:J,size:"sm",children:"Create"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{z(!1),I("")},children:"Cancel"})]})})]})}),e.jsx(T,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(B,{placeholder:r("Search media files..."),value:h,onChange:s=>he(s.target.value),className:"pl-10"})]}),h&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r('Showing results for "{{term}}"',{term:h})})]}),e.jsxs("div",{className:"flex gap-6 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-primary/10 rounded-md",children:e.jsx(M,{className:"h-4 w-4 text-primary"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[p.length," ",r("Files")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-green-500/10 rounded-md",children:e.jsx(ne,{className:"h-4 w-4 text-green-600"})}),e.jsx("span",{className:"text-sm font-semibold",children:O(p.reduce((s,t)=>s+t.size,0))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-500/10 rounded-md",children:e.jsx(M,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[p.filter(s=>s.mime_type.startsWith("image/")).length," ",r("Images")]})]})]})]})})}),e.jsx(T,{children:e.jsx(X,{className:"p-6",children:ue?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:r("Loading media...")})]}):ee.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4",children:e.jsx(M,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:r("No media files found")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:h?r('No results found for "{{term}}"',{term:h}):r("Get started by uploading your first media file")}),!h&&e.jsxs(c,{onClick:()=>v(!0),size:"lg",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),r("Upload Media")]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:ee.map(s=>{var t;return e.jsxs("div",{className:"group relative bg-card border rounded-lg overflow-hidden hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"relative aspect-square bg-muted flex items-center justify-center",children:[s.mime_type.startsWith("image/")?e.jsx("img",{src:s.thumb_url,alt:s.name,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src=s.url}}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"mb-2 text-2xl",children:Z(s.mime_type)}),e.jsx("div",{className:"text-xs text-center font-medium text-muted-foreground truncate w-full",children:((t=s.mime_type.split("/")[1])==null?void 0:t.toUpperCase())||"FILE"})]}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-200"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(c,{size:"sm",variant:"secondary",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8 p-0 bg-background/95 hover:bg-background shadow-md",children:e.jsx(Ue,{className:"h-4 w-4"})})}),(u(m,"view-media")||u(m,"download-media")||u(m,"delete-media"))&&e.jsxs(Ae,{align:"end",className:"w-40",children:[u(m,"view-media")&&e.jsxs(S,{onClick:()=>be(s),children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),r("View Info")]}),u(m,"view-media")&&e.jsxs(S,{onClick:()=>P(s.url),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),r("Copy Link")]}),u(m,"download-media")&&e.jsxs(S,{onClick:()=>Y(s.id,s.file_name),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),r("Download")]}),e.jsx(Ie,{}),u(m,"delete-media")&&e.jsxs(S,{onClick:()=>we(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),r("Delete")]})]})]})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(re,{variant:"secondary",className:"text-xs bg-background/95",children:s.mime_type.split("/")[1].toUpperCase()})})]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium truncate",title:s.name,children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(ne,{className:"h-3 w-3"}),O(s.size)]})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Me,{className:"h-3 w-3"}),new Date(s.created_at).toLocaleDateString()]})})]})]},s.id)})}),j>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-6 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r("Showing")," ",e.jsx("span",{className:"font-semibold",children:D+1})," ",r("to")," ",e.jsx("span",{className:"font-semibold",children:Math.min(D+C,p.length)})," ",r("of")," ",e.jsx("span",{className:"font-semibold",children:p.length})," ",r("files")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",disabled:g===1,onClick:()=>y(s=>Math.max(s-1,1)),children:r("Previous")}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(j,5)},(s,t)=>{let a;return j<=5||g<=3?a=t+1:g>=j-2?a=j-4+t:a=g-2+t,e.jsx(c,{variant:g===a?"default":"outline",size:"sm",className:"w-10 h-8",onClick:()=>y(a),children:a},a)})}),e.jsx(c,{variant:"outline",size:"sm",disabled:g===j,onClick:()=>y(s=>Math.min(s+1,j)),children:r("Next")})]})]})]})})}),e.jsx(ae,{open:fe,onOpenChange:v,children:e.jsxs(te,{className:"max-w-lg",children:[e.jsx(ie,{children:e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),r("Upload Media Files")]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-all duration-200 ${N?"border-blue-500 bg-blue-50 scale-[1.02]":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,onDragEnter:R,onDragLeave:R,onDragOver:R,onDrop:Ne,children:[e.jsxs("div",{className:`transition-all duration-200 ${N?"scale-110":""}`,children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(oe,{className:`h-8 w-8 transition-colors ${N?"text-blue-500":"text-gray-400"}`})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:r(N?"Drop files here":"Upload your images")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:r("Drag and drop your images here, or click to browse")}),e.jsx(B,{type:"file",multiple:!0,onChange:s=>s.target.files&&Q(s.target.files),className:"hidden",id:"file-upload-modal"}),e.jsx(c,{type:"button",onClick:()=>{var s;return(s=document.getElementById("file-upload-modal"))==null?void 0:s.click()},disabled:V,size:"lg",children:V?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),r("Uploading...")]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),r("Choose Files")]})})]}),N&&e.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-xl"})]})})]})}),e.jsx(ae,{open:ge,onOpenChange:G,children:e.jsxs(te,{className:"max-w-lg",children:[e.jsx(ie,{children:e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),r("Media Information")]})}),o&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center bg-gray-50 rounded-lg p-4",children:o.mime_type.startsWith("image/")?e.jsx("img",{src:o.thumb_url,alt:o.name,className:"max-w-full h-48 object-contain rounded-md shadow-sm",onError:s=>{s.currentTarget.src=o.url}}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 w-full",children:[e.jsx("div",{className:"mb-4 text-6xl",children:Z(o.mime_type)}),e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:((se=o.mime_type.split("/")[1])==null?void 0:se.toUpperCase())||"FILE"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:r("File Name")}),e.jsx("span",{className:"text-sm text-right max-w-xs truncate",title:o.file_name,children:o.file_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:r("File Type")}),e.jsx(re,{variant:"secondary",children:o.mime_type})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:r("File Size")}),e.jsx("span",{className:"text-sm",children:O(o.size)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:r("Uploaded")}),e.jsx("span",{className:"text-sm",children:ye(o.created_at)})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground block mb-2",children:r("URL")}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[e.jsx("code",{className:"text-xs text-muted-foreground flex-1 truncate",children:o.url}),e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>P(o.url),className:"h-6 w-6 p-0",children:e.jsx(W,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs(c,{variant:"outline",onClick:()=>P(o.url),className:"flex-1",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),r("Copy Link")]}),u(m,"download-media")&&e.jsxs(c,{variant:"outline",onClick:()=>Y(o.id,o.file_name),className:"flex-1",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),r("Download")]})]})]})]})})]})})}export{ms as default};
