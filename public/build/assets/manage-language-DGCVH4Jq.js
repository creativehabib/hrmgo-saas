import{r as o,j as s}from"./ui-C9UzXxo-.js";import{P as L}from"./page-template-B2HXPu-s.js";import{u as w,K as E,t as i,B as j,c as R,S as T,C as O,I as v}from"./app-CePVSpCk.js";import{S as P}from"./scroll-area-B6c1Z5Wm.js";import{R as A}from"./language-BWaL1pXC.js";import"./vendor-CxtKjBZA.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./CookieConsentBanner-9JM6Tk5v.js";import"./globe-DIoyL4mD.js";import"./switch-BT9_4soN.js";import"./copy-BbEiGrsE.js";import"./credit-card-Cw26BS3B.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./users-B2V-gWAi.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";/* empty css            *//* empty css                  */import"./utils-2yqaTY3d.js";function re(){var x;const{t}=w(),{languages:f,defaultLang:n,defaultData:d}=E().props,[l,S]=o.useState(n),[g,c]=o.useState(d),[b,m]=o.useState(!1),[h,u]=o.useState(!1),[p,N]=o.useState("");o.useEffect(()=>{S(n)},[n]),o.useEffect(()=>{if(l===n&&Object.keys(d).length>0){c(d);return}m(!0),fetch(`${route("language.load")}?lang=${l}`).then(e=>e.json()).then(e=>{e.data?c(e.data):c({}),m(!1)}).catch(()=>{c({}),m(!1),i.error(t("Failed to load language file"))})},[l,n,d,t]);const C=(e,r)=>{c(a=>({...a,[e]:r}))},y=e=>{var r;return e&&e.preventDefault(),u(!0),fetch(route("language.save"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({_method:"PATCH",lang:l,data:g})}).then(a=>a.json()).then(a=>{a.success?i.success(a.success||t("Language updated successfully")):a.error?i.error(a.error):i.success(t("Language updated successfully")),u(!1)}).catch(a=>{console.error("Save error:",a),i.error(t("Failed to update language file")),u(!1)}),!1};return s.jsx(L,{title:t("Manage Language"),url:"/manage-language",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[s.jsx("div",{className:"md:w-64 flex-shrink-0",children:s.jsx("div",{className:"sticky top-20",children:s.jsx(P,{className:"h-[calc(100vh-5rem)]",children:s.jsx("div",{className:"pr-4 space-y-1",children:f.map(e=>s.jsxs(j,{variant:"ghost",className:R("w-full justify-start",{"bg-muted font-medium":l===e.code}),onClick:()=>{l!==e.code&&T.get(route("manage-language",{lang:e.code}))},children:[e.countryCode&&s.jsx(A,{countryCode:e.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}}),e.name]},e.code))})})})}),s.jsx("div",{className:"flex-1",children:s.jsxs(O,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2",children:[s.jsxs("h2",{className:"text-lg font-semibold",children:[t("Edit Labels for")," ",(x=f.find(e=>e.code===l))==null?void 0:x.name]}),s.jsx(v,{placeholder:t("Search labels..."),value:p,onChange:e=>N(e.target.value),className:"w-full md:w-72"})]}),b?s.jsx("div",{children:t("Loading...")}):s.jsx("form",{onSubmit:e=>(e.preventDefault(),y(e),!1),children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(g).filter(([e,r])=>e.toLowerCase().includes(p.toLowerCase())||r.toLowerCase().includes(p.toLowerCase())).map(([e,r])=>s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{className:"text-xs text-muted-foreground truncate mb-1",children:e}),s.jsx(v,{className:"w-full",value:r,onChange:a=>C(e,a.target.value)})]},e))}),s.jsx("div",{className:"pt-6 text-right",children:s.jsx(j,{type:"submit",disabled:h,children:h?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"animate-spin h-4 w-4 border-2 border-t-transparent border-primary rounded-full"}),t("Saving...")]}):t("Save Changes")})})]})})]})})]})})}export{re as default};
