import{r as l,j as e}from"./ui-C9UzXxo-.js";import{c as k,L as N,u as I,K as U,t as L,d as V,C as v,q as g,r as y,B as R,s as F,S as z,p as C,I as T,i as w}from"./app-CePVSpCk.js";import{P as $}from"./page-template-B2HXPu-s.js";import{T as A,a as O,b as P,c as q}from"./tabs-DRsPt7bW.js";import{R as D}from"./rich-text-editor-BEW-aOgc.js";import"./vendor-CxtKjBZA.js";/* empty css            *//* empty css                  */import"./utils-2yqaTY3d.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./language-BWaL1pXC.js";import"./CookieConsentBanner-9JM6Tk5v.js";import"./globe-DIoyL4mD.js";import"./switch-BT9_4soN.js";import"./copy-BbEiGrsE.js";import"./credit-card-Cw26BS3B.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./users-B2V-gWAi.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";import"./unlink-BcdgK3yb.js";import"./list-gVaFRlBo.js";import"./quote-DD8yfV5f.js";import"./code-DLKgizn0.js";const _=l.forwardRef(({label:a,name:m,value:p="",onChange:t,placeholder:i,className:u,error:d,required:h,disabled:j=!1},x)=>{const o=l.useRef(null);return l.useImperativeHandle(x,()=>({getContent:()=>{var c;return((c=o.current)==null?void 0:c.getContent())||""},setContent:c=>{var f;return(f=o.current)==null?void 0:f.setContent(c)},focus:()=>{var c;return(c=o.current)==null?void 0:c.focus()}})),e.jsxs("div",{className:k("space-y-2",u),children:[a&&e.jsxs(N,{htmlFor:m,className:"text-sm font-medium",children:[a,h&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(D,{ref:o,content:p,onChange:t,placeholder:i,editable:!j,className:k(d&&"border-destructive",j&&"opacity-50 cursor-not-allowed")}),d&&e.jsx("p",{className:"text-sm text-destructive",children:d})]})});_.displayName="RichTextField";function ge({template:a,languages:m,variables:p}){var E,S;const{t}=I(),{flash:i}=U().props,[u,d]=l.useState(a.from),[h,j]=l.useState(((E=m[0])==null?void 0:E.code)||"en"),[x,o]=l.useState(a.email_template_langs.reduce((s,r)=>(s[r.lang]={subject:r.subject,content:r.content},s),{})),c=(s,r)=>{o(n=>({...n,[s]:{...n[s],subject:r}}))},f=(s,r)=>{o(n=>({...n,[s]:{...n[s],content:r}}))};l.useEffect(()=>{i!=null&&i.success&&L.success(i.success),i!=null&&i.error&&L.error(i.error)},[i]);const B=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Email Templates"),href:route("email-templates.index")},{title:a.name}],H=[];return e.jsxs($,{title:a.name,url:route("email-templates.show",a.id),breadcrumbs:B,actions:H,children:[e.jsx(V,{title:`Edit Template - ${a.name}`}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(v,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{children:t("Template Settings")}),e.jsxs(R,{onClick:()=>{z.put(route("email-templates.update-settings",a.id),{from:u})},size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),t("Save Changes")]})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{children:t("Template Name")}),e.jsx(T,{value:a.name,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("Template name cannot be changed")})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"from",children:t("From Name")}),e.jsx(T,{id:"from",value:u,onChange:s=>d(s.target.value),placeholder:t("Enter from name (e.g., {app_name}, Support Team)"),className:"focus:ring-2 focus:ring-primary"})]})]})]}),e.jsxs(v,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(y,{children:t("Email Content")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("Customize email content for different languages")})]}),e.jsxs(R,{onClick:()=>{const s=x[h];s&&z.put(route("email-templates.update-content",a.id),{lang:h,subject:s.subject,content:s.content})},size:"sm",className:"shrink-0",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),t("Save Content")]})]})}),e.jsx(C,{children:e.jsxs(A,{defaultValue:(S=m[0])==null?void 0:S.code,onValueChange:j,className:"w-full",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(O,{className:"inline-flex h-auto p-1 w-max",children:m.map(s=>e.jsx(P,{value:s.code,className:"text-xs px-3 py-2 whitespace-nowrap data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:s.code.toUpperCase()},s.code))})})}),m.map(s=>{var r,n;return e.jsxs(q,{value:s.code,className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx(w,{variant:"default",className:"px-3 py-1",children:s.code.toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("Edit email content for this language")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(N,{htmlFor:`subject-${s.code}`,className:"text-sm font-medium",children:t("Email Subject")}),e.jsx(T,{id:`subject-${s.code}`,value:((r=x[s.code])==null?void 0:r.subject)||"",onChange:b=>c(s.code,b.target.value),placeholder:t("Enter email subject (you can use variables like {app_name})"),className:"focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{label:"Email Content",value:((n=x[s.code])==null?void 0:n.content)||"",onChange:b=>f(s.code,b),placeholder:t("Write your email content here. You can use HTML formatting and variables..."),className:"min-h-[300px]"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ðŸ’¡ ",t("Tip: Use the variables from the sidebar to personalize your emails")]})]})]})]},s.code)})]})})]})]}),e.jsx("div",{children:e.jsxs(v,{children:[e.jsxs(g,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx("span",{children:t("Available Variables")}),e.jsx(w,{variant:"secondary",className:"text-xs",children:Object.keys(p).length})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("Click to copy variables to use in your email content")})]}),e.jsxs(C,{children:[e.jsx("div",{className:"space-y-3",children:Object.entries(p).map(([s,r])=>e.jsxs("div",{className:"group p-3 bg-muted/50 rounded-lg border hover:bg-muted/80 cursor-pointer transition-colors",onClick:()=>{navigator.clipboard.writeText(s)},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-sm font-mono text-primary font-medium bg-background px-1.5 py-0.5 rounded",children:s}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(w,{variant:"outline",className:"text-xs",children:t("Click to copy")})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 leading-relaxed",children:r})]},s))}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["ðŸ’¡ ",e.jsxs("strong",{children:[t("Tip"),":"]})," ",t("These variables will be automatically replaced with actual values when emails are sent.")]})})]})]})})]})]})}export{ge as default};
