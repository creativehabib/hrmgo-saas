import{r as T,j as e}from"./ui-C9UzXxo-.js";import{P as z}from"./page-template-B2HXPu-s.js";import{u as H,K as $,v as L,C as x,q as h,r as u,w as U,i as j,p as g,S as c,t as i}from"./app-CePVSpCk.js";import{P as A}from"./progress-Dh4CgLNX.js";import{T as I,a as K,b as P,c as l,d as Q,e as m}from"./table-C8TGnN1g.js";import{C as G}from"./CrudFormModal-BxbeyOXE.js";import{C as J}from"./CrudDeleteModal-CqSiuuPI.js";import{A as V}from"./arrow-left-CLCYWjlI.js";import{S as W}from"./square-pen-Df-vO64U.js";import{T as X}from"./trash-D_jTiZX2.js";import{f as Y}from"./utils-2yqaTY3d.js";import"./vendor-CxtKjBZA.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./language-BWaL1pXC.js";import"./CookieConsentBanner-9JM6Tk5v.js";import"./globe-DIoyL4mD.js";import"./switch-BT9_4soN.js";import"./copy-BbEiGrsE.js";import"./credit-card-Cw26BS3B.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./users-B2V-gWAi.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";/* empty css            *//* empty css                  */import"./radio-group-DixjSev-.js";import"./circle-hahOXJb0.js";import"./checkbox-DdUGEdGf.js";import"./scroll-area-B6c1Z5Wm.js";function Oe(){var b,y;const{t:s}=H(),{auth:d,trainingAssessment:a,statistics:n}=$().props,w=(d==null?void 0:d.permissions)||[],[D,f]=T.useState(!1),[_,p]=T.useState(!1),R=()=>{c.get(route("hr.training-assessments.index"))},M=()=>{p(!0)},F=()=>{f(!0)},O=t=>{i.loading(s("Updating assessment...")),c.put(route("hr.training-assessments.update",a.id),t,{onSuccess:r=>{p(!1),i.dismiss(),r.props.flash.success?i.success(s(r.props.flash.success)):r.props.flash.error?i.error(s(r.props.flash.error)):i.success(s("Assessment updated successfully"))},onError:r=>{i.dismiss(),typeof r=="string"?i.error(r):i.error(`Failed to update assessment: ${Object.values(r).join(", ")}`)}})},q=()=>{i.loading(s("Deleting assessment...")),c.delete(route("hr.training-assessments.destroy",a.id),{onSuccess:t=>{i.dismiss(),t.props.flash.success?i.success(s(t.props.flash.success)):t.props.flash.error?i.error(s(t.props.flash.error)):i.success(s("Assessment deleted successfully")),c.get(route("hr.training-assessments.index"))},onError:t=>{i.dismiss(),typeof t=="string"?i.error(t):i.error(`Failed to delete assessment: ${Object.values(t).join(", ")}`)}})},o=[];o.push({label:s("Back to List"),icon:e.jsx(V,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:R}),L(w,"manage-assessments")&&(o.push({label:s("Edit"),icon:e.jsx(W,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:M}),n.totalResults===0&&o.push({label:s("Delete"),icon:e.jsx(X,{className:"h-4 w-4 mr-2"}),variant:"destructive",onClick:F}));const E=[{title:s("Dashboard"),href:route("dashboard")},{title:s("HR Management"),href:route("hr.training-assessments.index")},{title:s("Training Management"),href:route("hr.training-assessments.index")},{title:s("Training Assessments"),href:route("hr.training-assessments.index")},{title:a.name}],k={quiz:"bg-blue-50 text-blue-700 ring-blue-600/20",practical:"bg-green-50 text-green-700 ring-green-600/20",presentation:"bg-amber-50 text-amber-700 ring-amber-600/20"},B=[{value:a.training_program.id.toString(),label:a.training_program.name}];return e.jsxs(z,{title:a.name,url:`/hr/training/assessments/${a.id}`,actions:o,breadcrumbs:E,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs(x,{className:"mb-6",children:[e.jsx(h,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(u,{className:"text-2xl",children:a.name}),e.jsx(U,{className:"mt-2",children:((b=a.training_program)==null?void 0:b.name)||s("Unknown Program")})]}),e.jsx(j,{className:`${k[a.type]||""}`,children:a.type.charAt(0).toUpperCase()+a.type.slice(1)})]})}),e.jsxs(g,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Passing Score")}),e.jsxs("p",{children:[a.passing_score,"%"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Created By")}),e.jsx("p",{children:((y=a.creator)==null?void 0:y.name)||"-"})]})]}),a.description&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Description")}),e.jsx("p",{className:"mt-1",children:a.description})]}),a.criteria&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Assessment Criteria")}),e.jsx("p",{className:"mt-1",children:a.criteria})]})]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:s("Assessment Results")})}),e.jsx(g,{children:a.employee_results&&a.employee_results.length>0?e.jsxs(I,{children:[e.jsx(K,{children:e.jsxs(P,{children:[e.jsx(l,{children:s("Employee")}),e.jsx(l,{children:s("Date")}),e.jsx(l,{children:s("Score")}),e.jsx(l,{children:s("Result")}),e.jsx(l,{children:s("Assessed By")})]})}),e.jsx(Q,{children:a.employee_results.map(t=>{var r,N,v,C,S;return e.jsxs(P,{children:[e.jsxs(m,{children:[e.jsx("div",{className:"font-medium",children:((N=(r=t.employee_training)==null?void 0:r.employee)==null?void 0:N.name)||"-"}),e.jsx("div",{className:"text-xs text-gray-500",children:((C=(v=t.employee_training)==null?void 0:v.employee)==null?void 0:C.employee_id)||"-"})]}),e.jsx(m,{children:Y(new Date(t.assessment_date),"MMM dd, yyyy")}),e.jsxs(m,{children:[t.score,"%"]}),e.jsx(m,{children:t.is_passed?e.jsx(j,{variant:"outline",className:"bg-green-50 text-green-700",children:s("Passed")}):e.jsx(j,{variant:"outline",className:"bg-red-50 text-red-700",children:s("Failed")})}),e.jsx(m,{children:((S=t.assessor)==null?void 0:S.name)||"-"})]},t.id)})})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:s("No assessment results available")})})]})]}),e.jsx("div",{children:e.jsxs(x,{className:"mb-6",children:[e.jsx(h,{children:e.jsx(u,{children:s("Statistics")})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s("Total Results")}),e.jsx("span",{className:"text-sm",children:n.totalResults})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s("Pass Rate")}),e.jsxs("span",{className:"text-sm",children:[n.passRate.toFixed(1),"%"]})]}),e.jsx(A,{value:n.passRate,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s("Average Score")}),e.jsxs("span",{className:"text-sm",children:[n.averageScore.toFixed(1),"%"]})]}),e.jsx(A,{value:n.averageScore,className:"h-2"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s("Passed")}),e.jsx("span",{className:"text-sm",children:n.passedResults})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s("Failed")}),e.jsx("span",{className:"text-sm",children:n.failedResults})]})})]})})]})})]}),e.jsx(G,{isOpen:_,onClose:()=>p(!1),onSubmit:O,formConfig:{fields:[{name:"training_program_id",label:s("Training Program"),type:"select",required:!0,options:B,disabled:!0},{name:"name",label:s("Assessment Name"),type:"text",required:!0},{name:"description",label:s("Description"),type:"textarea"},{name:"type",label:s("Assessment Type"),type:"select",required:!0,options:[{value:"quiz",label:s("Quiz")},{value:"practical",label:s("Practical")},{value:"presentation",label:s("Presentation")}]},{name:"passing_score",label:s("Passing Score (%)"),type:"number",required:!0,min:0,max:100},{name:"criteria",label:s("Assessment Criteria"),type:"textarea",helpText:s("Describe the criteria used to evaluate this assessment")}],modalSize:"lg"},initialData:a,title:s("Edit Assessment"),mode:"edit"}),e.jsx(J,{isOpen:D,onClose:()=>f(!1),onConfirm:q,itemName:a.name,entityName:"assessment"})]})}export{Oe as default};
