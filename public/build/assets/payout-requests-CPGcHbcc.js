import{r as m,j as e}from"./ui-C9UzXxo-.js";import{u as G,m as y,C as R,q as D,r as N,D as P,al as J,B as t,P as K,e as q,f as k,h as w,L as B,I as Q,p as S,F as V,X as W,t as x,i as Z}from"./app-CePVSpCk.js";import{T as ee,a as ae,b as A,c,d as se,e as i}from"./table-C8TGnN1g.js";import{T as te}from"./textarea-CiZFgYfM.js";import"./vendor-CxtKjBZA.js";/* empty css            *//* empty css                  */import"./utils-2yqaTY3d.js";function he({userType:n,payoutRequests:T,settings:r,stats:l,currencySymbol:o}){var b;const{t:a}=G(),[_,h]=m.useState(!1),[$,d]=m.useState(!1),[j,p]=m.useState(null),{data:H,setData:E,post:f,processing:F,errors:v,reset:L}=y({amount:""}),{data:Y,setData:g,post:z,processing:I}=y({notes:""}),M=s=>{s.preventDefault(),f(route("referral.payout-request.create"),{onSuccess:()=>{h(!1),L(),x.success(a("Payout request submitted successfully"))}})},O=s=>{f(route("referral.payout-request.approve",s.id),{onSuccess:()=>{x.success(a("Payout request approved"))}})},U=s=>{s.preventDefault(),j&&z(route("referral.payout-request.reject",j.id),{onSuccess:()=>{d(!1),p(null),g("notes",""),x.success(a("Payout request rejected"))}})},X=s=>{const u={pending:"default",approved:"success",rejected:"destructive"};return e.jsx(Z,{variant:u[s]||"default",children:a(s.charAt(0).toUpperCase()+s.slice(1))})};return e.jsxs("div",{className:"space-y-6",children:[n==="company"&&e.jsxs(R,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsx(N,{children:a("Create Payout Request")}),e.jsxs(P,{open:_,onOpenChange:h,children:[e.jsx(J,{asChild:!0,children:e.jsxs(t,{disabled:l.availableBalance<r.threshold_amount,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),a("Request Payout")]})}),e.jsxs(q,{children:[e.jsx(k,{children:e.jsx(w,{children:a("Create Payout Request")})}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"amount",children:a("Amount")}),e.jsx(Q,{id:"amount",type:"number",step:"0.01",min:r.threshold_amount,max:l.availableBalance,value:H.amount,onChange:s=>E("amount",s.target.value),placeholder:`Min: $${r.threshold_amount}`}),v.amount&&e.jsx("p",{className:"text-sm text-red-500",children:v.amount})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:[a("Available Balance"),": ",o,l.availableBalance]}),e.jsxs("p",{children:[a("Minimum Amount"),": ",o,r.threshold_amount]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>h(!1),children:a("Cancel")}),e.jsx(t,{type:"submit",disabled:F,children:a("Submit Request")})]})]})]})]})]}),e.jsx(S,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:l.availableBalance<r.threshold_amount?a("You need at least {{amount}} to request a payout",{amount:`${o}${r.threshold_amount}`}):a("You can request up to {{amount}} for payout",{amount:`${o}${l.availableBalance}`})})})]}),e.jsxs(R,{children:[e.jsx(D,{children:e.jsx(N,{children:a(n==="superadmin"?"All Payout Requests":"Your Payout Requests")})}),e.jsx(S,{children:e.jsxs(ee,{children:[e.jsx(ae,{children:e.jsxs(A,{className:"dark:bg-gray-800 dark:border-gray-700",children:[n==="superadmin"&&e.jsx(c,{children:a("Company")}),e.jsx(c,{children:a("Amount")}),e.jsx(c,{children:a("Status")}),e.jsx(c,{children:a("Date")}),n==="superadmin"&&e.jsx(c,{children:a("Actions")})]})}),e.jsx(se,{children:(b=T.data)==null?void 0:b.map(s=>{var u,C;return e.jsxs(A,{className:"dark:bg-gray-900 dark:border-gray-700 dark:hover:bg-gray-800",children:[n==="superadmin"&&e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(u=s.company)==null?void 0:u.name}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:(C=s.company)==null?void 0:C.email})]})}),e.jsxs(i,{children:[o,s.amount]}),e.jsx(i,{children:X(s.status)}),e.jsx(i,{children:new Date(s.created_at).toLocaleDateString()}),n==="superadmin"&&s.status==="pending"&&e.jsx(i,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>O(s),children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),a("Approve")]}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>{p(s),d(!0)},children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),a("Reject")]})]})})]},s.id)})})]})})]}),e.jsx(P,{open:$,onOpenChange:d,children:e.jsxs(q,{children:[e.jsx(k,{children:e.jsx(w,{children:a("Reject Payout Request")})}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"notes",children:a("Rejection Reason")}),e.jsx(te,{id:"notes",value:Y.notes,onChange:s=>g("notes",s.target.value),placeholder:a("Enter reason for rejection...")})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>d(!1),children:a("Cancel")}),e.jsx(t,{type:"submit",variant:"destructive",disabled:I,children:a("Reject Request")})]})]})]})})]})}export{he as default};
