import{r as _,j as e}from"./ui-C9UzXxo-.js";import{P as Oe}from"./page-template-B2HXPu-s.js";import{u as $e,K as Re,v as x,a6 as fe,C as g,q as u,r as j,w as qe,i as l,p as f,B as y,S as d,t as i}from"./app-CePVSpCk.js";import{T as Be,a as Ue,b as ye,c as m,d as Ie,e as c}from"./table-C8TGnN1g.js";import{C as be}from"./CrudFormModal-BxbeyOXE.js";import{C as We}from"./CrudDeleteModal-CqSiuuPI.js";import{T as He,a as Le,b as Ne,c as ve}from"./tabs-DRsPt7bW.js";import{A as Ve}from"./arrow-left-CLCYWjlI.js";import{S as ze}from"./square-pen-Df-vO64U.js";import{T as Ke}from"./trash-D_jTiZX2.js";import{D as _e}from"./download-Dy8kf_tz.js";import{f as w}from"./utils-2yqaTY3d.js";import"./vendor-CxtKjBZA.js";import"./textarea-CiZFgYfM.js";import"./select-79vLaRYu.js";import"./index-BK2YBUn9.js";import"./chevron-up-FpzKnv5W.js";import"./language-BWaL1pXC.js";import"./CookieConsentBanner-9JM6Tk5v.js";import"./globe-DIoyL4mD.js";import"./switch-BT9_4soN.js";import"./copy-BbEiGrsE.js";import"./credit-card-Cw26BS3B.js";import"./settings-CabqR4KC.js";import"./dollar-sign-BZxmLz_1.js";import"./users-B2V-gWAi.js";import"./clock-DvHC5ovF.js";import"./coins-Curs0q0e.js";import"./user-Cs-z8Fus.js";import"./use-favicon-BlwZF4jE.js";/* empty css            *//* empty css                  */import"./radio-group-DixjSev-.js";import"./circle-hahOXJb0.js";import"./checkbox-DdUGEdGf.js";import"./scroll-area-B6c1Z5Wm.js";function Ms(){var S,A,M,F,k,E,P,O,$,R,q,B,U,I,W,H,L,V,z,K,G,J,Q,X,Y,Z,ee,se,ae,te,ie,re,ne,le,oe,de,me,ce,pe;const{t:s}=$e(),{auth:b,employeeTraining:a,availableAssessments:o}=Re().props,h=(b==null?void 0:b.permissions)||[],[we,C]=_.useState(!1),[Ce,N]=_.useState(!1),[Te,v]=_.useState(!1),De=()=>{d.get(route("hr.employee-trainings.index"))},Se=()=>{N(!0)},Ae=()=>{C(!0)},T=()=>{v(!0)},Me=()=>{window.open(route("hr.employee-trainings.download-certification",a.id),"_blank")},Fe=t=>{const n=new FormData;Object.keys(t).forEach(r=>{t[r]!==null&&t[r]!==void 0&&(r==="certification"?t[r]instanceof File&&n.append(r,t[r]):n.append(r,t[r]))}),i.loading(s("Updating training...")),n.append("_method","PUT"),d.post(route("hr.employee-trainings.update",a.id),n,{onSuccess:r=>{N(!1),i.dismiss(),r.props.flash.success?i.success(s(r.props.flash.success)):r.props.flash.error&&i.error(s(r.props.flash.error))},onError:r=>{i.dismiss(),typeof r=="string"?i.error(s(r)):i.error(s("Failed to update training: {{errors}}",{errors:Object.values(r).join(", ")}))}})},ke=t=>{i.loading(s("Recording assessment result...")),d.post(route("hr.employee-trainings.record-assessment",a.id),t,{onSuccess:n=>{v(!1),i.dismiss(),n.props.flash.success?i.success(s(n.props.flash.success)):n.props.flash.error&&i.error(s(n.props.flash.error))},onError:n=>{i.dismiss(),typeof n=="string"?i.error(s(n)):i.error(s("Failed to record assessment result: {{errors}}",{errors:Object.values(n).join(", ")}))}})},Ee=()=>{i.loading(s("Deleting training assignment...")),d.delete(route("hr.employee-trainings.destroy",a.id),{onSuccess:t=>{i.dismiss(),t.props.flash.success?i.success(s(t.props.flash.success)):t.props.flash.error&&i.error(s(t.props.flash.error)),d.get(route("hr.employee-trainings.index"))},onError:t=>{i.dismiss(),typeof t=="string"?i.error(s(t)):i.error(s("Failed to delete training assignment: {{errors}}",{errors:Object.values(t).join(", ")}))}})},p=[];p.push({label:s("Back to List"),icon:e.jsx(Ve,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:De}),x(h,"edit-employee-trainings")&&p.push({label:s("Edit"),icon:e.jsx(ze,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:Se}),x(h,"delete-employee-trainings")&&p.push({label:s("Delete"),icon:e.jsx(Ke,{className:"h-4 w-4 mr-2"}),variant:"destructive",onClick:Ae}),x(h,"record-assessment-results")&&o&&o.length>0&&p.push({label:s("Record Assessment"),icon:e.jsx(fe,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:T});const Pe=[{title:s("Dashboard"),href:route("dashboard")},{title:s("HR Management"),href:route("hr.employee-trainings.index")},{title:s("Training Management"),href:route("hr.employee-trainings.index")},{title:s("Employee Trainings"),href:route("hr.employee-trainings.index")},{title:`${((S=a.employee)==null?void 0:S.name)||""} - ${((A=a.training_program)==null?void 0:A.name)||""}`}],D={assigned:"bg-blue-50 text-blue-700 ring-blue-600/20",in_progress:"bg-amber-50 text-amber-700 ring-amber-600/20",completed:"bg-green-50 text-green-700 ring-green-600/20",failed:"bg-red-50 text-red-700 ring-red-600/20"};return e.jsxs(Oe,{title:`${((M=a.employee)==null?void 0:M.name)||""} - ${((F=a.training_program)==null?void 0:F.name)||""}`,url:`/hr/training/employee-trainings/${a.id}`,actions:p,breadcrumbs:Pe,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs(g,{className:"mb-6",children:[e.jsx(u,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-2xl",children:((k=a.training_program)==null?void 0:k.name)||s("Unknown Program")}),e.jsx(qe,{className:"mt-2",children:((P=(E=a.training_program)==null?void 0:E.training_type)==null?void 0:P.name)||"-"})]}),e.jsx(l,{className:`${D[a.status]||"bg-gray-50 text-gray-700 ring-gray-600/20"}`,children:a.status==="in_progress"?s("In Progress"):a.status==="assigned"?s("Assigned"):a.status==="completed"?s("Completed"):a.status==="failed"?s("Failed"):a.status})]})}),e.jsxs(f,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Employee")}),e.jsx("p",{className:"font-medium",children:((O=a.employee)==null?void 0:O.name)||"-"}),e.jsx("p",{className:"text-sm text-gray-500",children:((R=($=a.employee)==null?void 0:$.employee)==null?void 0:R.employee_id)||"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Assigned By")}),e.jsx("p",{children:((q=a.assigner)==null?void 0:q.name)||"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Assigned Date")}),e.jsx("p",{children:a.assigned_date?((B=window.appSettings)==null?void 0:B.formatDateTime(a.assigned_date,!1))||w(new Date(a.assigned_date),"MMM dd, yyyy"):"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Completion Date")}),e.jsx("p",{children:a.completion_date?((U=window.appSettings)==null?void 0:U.formatDateTime(a.completion_date,!1))||w(new Date(a.completion_date),"MMM dd, yyyy"):"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Score")}),e.jsx("p",{children:a.score!==null?`${a.score}%`:"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Result")}),e.jsx("p",{children:a.is_passed===null?"-":a.is_passed?e.jsx(l,{variant:"outline",className:"bg-green-50 text-green-700",children:s("Passed")}):e.jsx(l,{variant:"outline",className:"bg-red-50 text-red-700",children:s("Failed")})})]})]}),a.feedback&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Feedback")}),e.jsx("p",{className:"mt-1",children:a.feedback})]}),a.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Notes")}),e.jsx("p",{className:"mt-1",children:a.notes})]}),a.certification&&e.jsx("div",{className:"mt-4",children:e.jsxs(y,{variant:"outline",onClick:Me,className:"flex items-center",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),s("Download Certification")]})})]})]}),e.jsxs(He,{defaultValue:"program",className:"w-full",children:[e.jsxs(Le,{className:"grid grid-cols-2 mb-4",children:[e.jsx(Ne,{value:"program",children:s("Program Details")}),e.jsx(Ne,{value:"assessments",children:s("Assessment Results")})]}),e.jsx(ve,{value:"program",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(j,{children:s("Program Details")})}),e.jsxs(f,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Duration")}),e.jsx("p",{children:(I=a.training_program)!=null&&I.duration?`${a.training_program.duration} ${s("hours")}`:"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Cost")}),e.jsx("p",{children:(W=a.training_program)!=null&&W.cost?`$${parseFloat(a.training_program.cost).toFixed(2)}`:"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Status")}),e.jsx("p",{children:e.jsx(l,{variant:"outline",className:`${D[(H=a.training_program)==null?void 0:H.status]||""}`,children:((V=(L=a.training_program)==null?void 0:L.status)==null?void 0:V.charAt(0).toUpperCase())+((K=(z=a.training_program)==null?void 0:z.status)==null?void 0:K.slice(1))||"-"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Flags")}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[((G=a.training_program)==null?void 0:G.is_mandatory)&&e.jsx(l,{variant:"outline",className:"bg-red-50 text-red-700",children:s("Mandatory")}),((J=a.training_program)==null?void 0:J.is_self_enrollment)&&e.jsx(l,{variant:"outline",className:"bg-blue-50 text-blue-700",children:s("Self-Enrollment")})]})]})]}),((Q=a.training_program)==null?void 0:Q.description)&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Description")}),e.jsx("p",{className:"mt-1",children:a.training_program.description})]}),((X=a.training_program)==null?void 0:X.prerequisites)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Prerequisites")}),e.jsx("p",{className:"mt-1",children:a.training_program.prerequisites})]}),((Y=a.training_program)==null?void 0:Y.materials)&&e.jsx("div",{className:"mt-4",children:e.jsxs(y,{variant:"outline",onClick:()=>window.open(route("hr.training-programs.download-materials",a.training_program.id),"_blank"),className:"flex items-center",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),s("Download Materials")]})})]})]})}),e.jsx(ve,{value:"assessments",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(j,{children:s("Assessment Results")})}),e.jsxs(f,{children:[a.assessment_results&&a.assessment_results.length>0?e.jsxs(Be,{children:[e.jsx(Ue,{children:e.jsxs(ye,{children:[e.jsx(m,{children:s("Assessment")}),e.jsx(m,{children:s("Type")}),e.jsx(m,{children:s("Date")}),e.jsx(m,{children:s("Score")}),e.jsx(m,{children:s("Result")}),e.jsx(m,{children:s("Assessed By")})]})}),e.jsx(Ie,{children:a.assessment_results.map(t=>{var n,r,he,xe,ge,ue,je;return e.jsxs(ye,{children:[e.jsx(c,{className:"font-medium",children:((n=t.training_assessment)==null?void 0:n.name)||"-"}),e.jsx(c,{children:((he=(r=t.training_assessment)==null?void 0:r.type)==null?void 0:he.charAt(0).toUpperCase())+((ge=(xe=t.training_assessment)==null?void 0:xe.type)==null?void 0:ge.slice(1))||"-"}),e.jsx(c,{children:((ue=window.appSettings)==null?void 0:ue.formatDateTime(t.assessment_date,!1))||w(new Date(t.assessment_date),"MMM dd, yyyy")}),e.jsxs(c,{children:[t.score,"%"]}),e.jsx(c,{children:t.is_passed?e.jsx(l,{variant:"outline",className:"bg-green-50 text-green-700",children:s("Passed")}):e.jsx(l,{variant:"outline",className:"bg-red-50 text-red-700",children:s("Failed")})}),e.jsx(c,{children:((je=t.assessor)==null?void 0:je.name)||"-"})]},t.id)})})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:s("No assessment results available")}),o&&o.length>0&&x(h,"record-assessment-results")&&e.jsx("div",{className:"mt-4",children:e.jsxs(y,{variant:"default",onClick:T,children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),s("Record Assessment")]})})]})]})})]})]}),e.jsx("div",{children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(j,{children:s("Employee Details")})}),e.jsxs(f,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Name")}),e.jsx("p",{className:"font-medium",children:((Z=a.employee)==null?void 0:Z.name)||"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Employee ID")}),e.jsx("p",{children:((se=(ee=a.employee)==null?void 0:ee.employee)==null?void 0:se.employee_id)||"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Department")}),e.jsx("p",{children:((ie=(te=(ae=a.employee)==null?void 0:ae.employee)==null?void 0:te.department)==null?void 0:ie.name)||"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Designation")}),e.jsx("p",{children:((le=(ne=(re=a.employee)==null?void 0:re.employee)==null?void 0:ne.designation)==null?void 0:le.name)||"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Email")}),e.jsx("p",{children:((oe=a.employee)==null?void 0:oe.email)||"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:s("Phone")}),e.jsx("p",{children:((me=(de=a.employee)==null?void 0:de.employee)==null?void 0:me.phone)||"-"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(y,{variant:"outline",onClick:()=>{var t,n;return d.get(route("hr.employees.show",(n=(t=a.employee)==null?void 0:t.employee)==null?void 0:n.id))},className:"w-full",children:s("View Employee Profile")})})]})]})})]}),e.jsx(be,{isOpen:Ce,onClose:()=>N(!1),onSubmit:Fe,formConfig:{fields:[{name:"status",label:s("Status"),type:"select",required:!0,options:[{value:"assigned",label:s("Assigned")},{value:"in_progress",label:s("In Progress")},{value:"completed",label:s("Completed")},{value:"failed",label:s("Failed")}]},{name:"completion_date",label:s("Completion Date"),type:"date",showWhen:t=>["completed","failed"].includes(t.status)},{name:"certification",label:s("Certification"),type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",helpText:s("Upload certification file (max 5MB)"),showWhen:t=>t.status==="completed"},{name:"score",label:s("Score (%)"),type:"number",min:0,max:100,step:.01,showWhen:t=>["completed","failed"].includes(t.status)},{name:"is_passed",label:s("Passed"),type:"checkbox",showWhen:t=>["completed","failed"].includes(t.status)},{name:"feedback",label:s("Feedback"),type:"textarea",showWhen:t=>["completed","failed"].includes(t.status)},{name:"notes",label:s("Notes"),type:"textarea"}],modalSize:"lg"},initialData:a,title:s("Edit Training Assignment"),mode:"edit"}),e.jsx(be,{isOpen:Te,onClose:()=>v(!1),onSubmit:ke,formConfig:{fields:[{name:"training_assessment_id",label:s("Assessment"),type:"select",required:!0,options:(o==null?void 0:o.map(t=>({value:t.id.toString(),label:t.name})))||[]},{name:"score",label:s("Score (%)"),type:"number",required:!0,min:0,max:100,step:.01},{name:"is_passed",label:s("Passed"),type:"checkbox"},{name:"feedback",label:s("Feedback"),type:"textarea"},{name:"assessment_date",label:s("Assessment Date"),type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0]},{name:"update_training_status",label:s("Update Training Status"),type:"checkbox",helpText:s("Update the training status based on this assessment result")}],modalSize:"md"},initialData:{},title:s("Record Assessment Result"),mode:"create"}),e.jsx(We,{isOpen:we,onClose:()=>C(!1),onConfirm:Ee,itemName:`${((ce=a.employee)==null?void 0:ce.name)||""} - ${((pe=a.training_program)==null?void 0:pe.name)||""}`,entityName:"training assignment"})]})}export{Ms as default};
