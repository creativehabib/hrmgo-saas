import{r as l,j as w}from"./ui-C9UzXxo-.js";import{K as f}from"./app-CePVSpCk.js";function m({onVerify:o,onExpired:h,onError:c}){const{settings:r={}}=f().props,n=l.useRef(null),p=l.useRef(null),s=r.recaptchaEnabled==="true"||r.recaptchaEnabled===!0||r.recaptchaEnabled===1||r.recaptchaEnabled==="1",t=r.recaptchaVersion||"v2",a=r.recaptchaSiteKey||"";return l.useEffect(()=>{if(!s||!a)return;const i=()=>{try{t==="v2"?d():u()}catch(e){console.error("ReCaptcha load error:",e),c&&c()}},d=()=>{if(window.grecaptcha&&n.current)try{p.current=window.grecaptcha.render(n.current,{sitekey:a,callback:o,"expired-callback":h||(()=>{}),"error-callback":c||(()=>{})})}catch(e){console.error("ReCaptcha v2 render error:",e)}},u=()=>{if(window.grecaptcha)try{window.grecaptcha.ready(()=>{window.grecaptcha.execute(a,{action:"submit"}).then(e=>{o(e)}).catch(e=>{console.error("ReCaptcha v3 execute error:",e),c&&c()})})}catch(e){console.error("ReCaptcha v3 ready error:",e)}};if(window.grecaptcha)i();else{window.onRecaptchaLoad=i;const e=document.createElement("script");e.src=`https://www.google.com/recaptcha/api.js?onload=onRecaptchaLoad&render=${t==="v3"?a:"explicit"}`,e.async=!0,e.defer=!0,e.onerror=()=>{console.error("Failed to load ReCaptcha script"),c&&c()},document.head.appendChild(e)}return()=>{try{p.current!==null&&window.grecaptcha&&window.grecaptcha.reset(p.current)}catch(e){console.error("ReCaptcha cleanup error:",e)}}},[s,t,a,o,h,c]),!s||!a?null:t==="v2"?w.jsx("div",{ref:n}):null}export{m as R};
